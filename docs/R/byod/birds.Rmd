---
editor_options:
  chunk_output_type: console
---

```{r setup}

```

```{r packages}
library(tidyverse)
library(EcoData)

```

```{r get_data}
birds <- as_tibble(birdabundance)
#write_csv(birds, file = "./data/birdabundance.csv")
```

# Look at the structure of the data

What are the variables? What are the values?

First look at the summary and structure of the data

- only numeric columns
- response column is ABUND
- Summary shows not missing values

```{r}
str(birds)
summary(birds)
```

# Rename columns and add new col

I don't like the column names, I want to rename some of them.

- add column for number of years since it was isolated

```{r}
birds <- birds %>% 
  rename_with(tolower, everything()) %>% 
  rename(isol_since = yr.isol) %>% 
  mutate(isol_years = 2021 - isol_since)
```

Including some categorical variables for exploratory plotting

```{r}
q_10 <- quantile(birds$area, 0.1)
q_25 <- quantile(birds$area, 0.25)
q_80 <- quantile(birds$area, 0.8)

birds %>% 
  mutate(
    area_class = case_when(
      area < q_10  ~ "tiny",
      between(area, q_10, q_25) ~ "small",
      between(area, q_25, q_80) ~ "medium",
      area > q_80 ~ "large"
    )
  )
```


# Some plots for exploration

looks like
-  the longer a site is isolated the higher the grazing intensity is
-  the longer a site is isolated the lower the abundance
- grazing intensity does not seem to affect the birds but years of isolation do

```{r}
ggplot(birds, aes(x = isol_years, y = abund, color = factor(graze)))+
  geom_point()
```



```{r}
ggplot(birds, aes(x = dist, y = abund)) +
  geom_point()
```

```{r}
ggplot(data = birds,
mapping = aes(
x = DIST,
y = YR.ISOL,
size = ABUND,
color = ABUND)) +
geom_point() +
scale_color_gradient(low="blue",high="red")+
scale_x_log10()
```

