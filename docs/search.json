{
  "articles": [
    {
      "path": "01_solutions_controller.html",
      "title": "Solutions for day 1",
      "author": [],
      "contents": "\r\n\r\nContents\r\n2 Data types and vectors\r\n2.1 Type conversion\r\n2.2 Working with vectors\r\nExtras\r\nReferences\r\n\r\n3 Tibbles\r\n3.2 Creating a tibble\r\n3.3 Exploring the tibble\r\n\r\n4 Reading and writing tibbles\r\n3.1 Create a tibble and write it\r\n3.2 Read data into R\r\n\r\nReference\r\n\r\n2 Data types and vectors\r\n\r\n\r\n\r\n2.1 Type conversion\r\nImplicit type conversion follows the following rules:\r\nnumeric (double & integer)  character\r\nlogical  numeric\r\nlogical  character\r\n\r\n\r\nv1 <- c(1, \"a\", 2, 3)\r\ntypeof(v1)\r\n\r\n\r\n[1] \"character\"\r\n\r\nv2 <- c(TRUE, TRUE, 1L, FALSE, 0L)\r\ntypeof(v2)\r\n\r\n\r\n[1] \"integer\"\r\n\r\nv3 <- c(0, \"23\", 5, 7)\r\ntypeof(v3)\r\n\r\n\r\n[1] \"character\"\r\n\r\nv4 <- c(4L, 6L, 23.5345)\r\ntypeof(v4)\r\n\r\n\r\n[1] \"double\"\r\n\r\nv5 <- c(TRUE, \"a\", FALSE, \"FALSE\")\r\ntypeof(v5)\r\n\r\n\r\n[1] \"character\"\r\n\r\nExplicit conversion to integer\r\nValues cannot be converted from type character to type integer. If you try to do this, you will get a warning that the conversion returned NA\r\n\r\n\r\nas.integer(v1)\r\n\r\n\r\nWarning: NAs introduced by coercion\r\n[1]  1 NA  2  3\r\n\r\nas.integer(v2)\r\n\r\n\r\n[1] 1 1 1 0 0\r\n\r\nas.integer(v3)\r\n\r\n\r\n[1]  0 23  5  7\r\n\r\nas.integer(v4)\r\n\r\n\r\n[1]  4  6 23\r\n\r\nas.integer(v5)\r\n\r\n\r\nWarning: NAs introduced by coercion\r\n[1] NA NA NA NA\r\n\r\nExplicit conversion to character\r\nVectors of all data types can be converted to character. No NA values are introduced.\r\n\r\n\r\nas.character(v1)\r\n\r\n\r\n[1] \"1\" \"a\" \"2\" \"3\"\r\n\r\nas.character(v2)\r\n\r\n\r\n[1] \"1\" \"1\" \"1\" \"0\" \"0\"\r\n\r\nas.character(v3)\r\n\r\n\r\n[1] \"0\"  \"23\" \"5\"  \"7\" \r\n\r\nas.character(v4)\r\n\r\n\r\n[1] \"4\"       \"6\"       \"23.5345\"\r\n\r\nas.character(v5)\r\n\r\n\r\n[1] \"TRUE\"  \"a\"     \"FALSE\" \"FALSE\"\r\n\r\n2.2 Working with vectors\r\n\r\n\r\nspecies <- c(\r\n  \"MountainBeaver\", \"Cow\", \"GreyWolf\", \"Goat\",\r\n  \"GuineaPig\", \"Diplodocus\", \"AsianElephant\", \"Donkey\",\r\n  \"Horse\", \"PotarMonkey\", \"Cat\", \"Giraffe\",\r\n  \"Gorilla\", \"Human\", \"AfricanElephant\", \"Triceratops\",\r\n  \"RhesusMonkey\", \"Kangaroo\", \"GoldenHamster\", \"Mouse\",\r\n  \"Rabbit\", \"Sheep\", \"Jaguar\", \"Chimpanzee\",\r\n  \"Rat\", \"Brachiosaurus\", \"Mole\", \"Pig\"\r\n)\r\n\r\nbodywt_kg <- c(\r\n  1.4, 465, 36.3, 27.7, 1., 11700, 2547, 187.1,\r\n  521, 10, 3.3, 529, 207, 62, 6654, 9400,\r\n  6.8, 35, 0.1, 0.02, 2.5, 55.5, 100, 52.2,\r\n  0.3, 87000, 0.1, 192\r\n)\r\n\r\nbrainwt_g <- c(\r\n  8.1, 423, 119.5, 115, 5.5, 50, 4603, 419, 655, 115, 25.6,\r\n  680, 406, 1320, 5712, 70, 179, 56, 1, 0.4, 12.1, 175,\r\n  157, 440, 1.9, 154.5, 3, 180\r\n)\r\n\r\n\r\n\r\nCheck if the following animals are contained in the data set\r\n\r\n\r\nanimals_to_check <- c(\"Snail\", \"Goat\", \"Chimpanzee\", \"Rat\", \"Dragon\", \"Eagle\")\r\n# Goes through every element in species and returns TRUE if it appears in animals_to_check\r\n\r\n\r\n\r\n\r\n\r\nspecies %in% animals_to_check\r\n\r\n\r\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\r\n[12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\r\n[23] FALSE  TRUE  TRUE FALSE FALSE FALSE\r\n\r\n# Goes through every element in animals_to_check and returns TRUE if it appears in species\r\nanimals_to_check %in% species\r\n\r\n\r\n[1] FALSE  TRUE  TRUE  TRUE FALSE FALSE\r\n\r\nNote: If you use %in% to check if elements are contained in a vector, the result vector is of the same length as the vector that is before the %in%\r\nConvert the brain weight from g to kg:\r\n\r\n\r\nbrainwt_kg <- brainwt_g / 1000\r\n\r\n\r\n\r\nWhat is the mean brain weight\r\n\r\n\r\nmean(brainwt_kg)\r\n\r\n\r\n[1] 0.5745214\r\n\r\nWhich species have brain weight that is larger than the mean brain weight?\r\n\r\n\r\nspecies[brainwt_kg > mean(brainwt_kg)]\r\n\r\n\r\n[1] \"AsianElephant\"   \"Horse\"           \"Giraffe\"        \r\n[4] \"Human\"           \"AfricanElephant\"\r\n\r\nCalculate the ratio brain weight / body weight and save it in a vector:\r\n\r\n\r\nbrain_body_ratio <- brainwt_kg / bodywt_kg * 100\r\n\r\n\r\n\r\nWhich animals have a larger brain to body ratio than humans?\r\nStep 1: Look at the brain to body ratio of humans\r\n\r\n\r\nbrain_body_ratio[species == \"Human\"]\r\n\r\n\r\n[1] 2.129032\r\n\r\nStep 2: Compare it with the other animals\r\n\r\n\r\n# New variable for human brain to body ratio\r\nbbr_human <- brain_body_ratio[species == \"Human\"]\r\n# Are there animals that have a larger brain to body ratio than humans?\r\nbrain_body_ratio > bbr_human\r\n\r\n\r\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\r\n[12] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE\r\n[23] FALSE FALSE FALSE FALSE  TRUE FALSE\r\n\r\n# Which are these animals\r\nspecies[brain_body_ratio > bbr_human]\r\n\r\n\r\n[1] \"RhesusMonkey\" \"Mole\"        \r\n\r\n# or short\r\nspecies[brain_body_ratio > brain_body_ratio[species == \"Human\"]]\r\n\r\n\r\n[1] \"RhesusMonkey\" \"Mole\"        \r\n\r\nExtras\r\nRound the vector to 4 decimal places:\r\n\r\n\r\nbrain_body_ratio <- round(brain_body_ratio, digits = 4)\r\n\r\n\r\n\r\nWhich animal has the smallest brain to body ratio?\r\n\r\n\r\nspecies[brain_body_ratio == min(brain_body_ratio)]\r\n\r\n\r\n[1] \"Brachiosaurus\"\r\n\r\nThe Brachiosaurus has a really small brain with a weight of just 154.5 g at a body weight of 87000 kg!\r\nAdd elements to the vector\r\n\r\n\r\nspecies_new <- c(\"Eagle\", \"Snail\", \"Lion\")\r\nbrainwt_g_new <- c(40, NA, 500)\r\nbodywt_kg_new <- c(18, 0.01, 550)\r\n\r\nspecies <- c(species, species_new)\r\nbrainwt_g <- c(brainwt_g, brainwt_g_new)\r\nbodywt_kg <- c(bodywt_kg, bodywt_kg_new)\r\n\r\n\r\n\r\nWhat is the mean brain weight now?\r\n\r\n\r\nmean(brainwt_g)\r\n\r\n\r\n[1] NA\r\n\r\n# na.rm = TRUE\r\nmean(brainwt_g, na.rm = TRUE)\r\n\r\n\r\n[1] 554.22\r\n\r\nReferences\r\nWolfram Research, “Sample Data: Animal Weights” from the Wolfram Data Repository (2016) https://doi.org/10.24097/wolfram.43616.data\r\n\r\n3 Tibbles\r\n3.2 Creating a tibble\r\nUse the vectors species, brainwt_kg, bodywt_kg from the last task and put them in a tibble.\r\n\r\n\r\n# install.packages(\"tibble\")\r\nlibrary(tibble)\r\n\r\nspecies <- c(\r\n  \"MountainBeaver\", \"Cow\", \"GreyWolf\", \"Goat\",\r\n  \"GuineaPig\", \"Diplodocus\", \"AsianElephant\", \"Donkey\",\r\n  \"Horse\", \"PotarMonkey\", \"Cat\", \"Giraffe\",\r\n  \"Gorilla\", \"Human\", \"AfricanElephant\", \"Triceratops\",\r\n  \"RhesusMonkey\", \"Kangaroo\", \"GoldenHamster\", \"Mouse\",\r\n  \"Rabbit\", \"Sheep\", \"Jaguar\", \"Chimpanzee\",\r\n  \"Rat\", \"Brachiosaurus\", \"Mole\", \"Pig\"\r\n)\r\n\r\nbodywt_kg <- c(\r\n  1.4, 465, 36.3, 27.7, 1., 11700, 2547, 187.1,\r\n  521, 10, 3.3, 529, 207, 62, 6654, 9400,\r\n  6.8, 35, 0.1, 0.02, 2.5, 55.5, 100, 52.2,\r\n  0.3, 87000, 0.1, 192\r\n)\r\n\r\nbrainwt_g <- c(\r\n  8.1, 423, 119.5, 115, 5.5, 50, 4603, 419, 655, 115, 25.6,\r\n  680, 406, 1320, 5712, 70, 179, 56, 1, 0.4, 12.1, 175,\r\n  157, 440, 1.9, 154.5, 3, 180\r\n)\r\n# Creating the tibble \r\nanimals <- tibble(\r\n  species = species,\r\n  bodywt_kg = bodywt_kg,\r\n  brainwt_kg = brainwt_g / 1000\r\n)\r\n\r\n\r\n\r\n3.3 Exploring the tibble\r\nIn the view window that opens, you have some options to filter the data and sort rows.\r\n\r\n\r\nview(animals)\r\n\r\n\r\n\r\n\r\n\r\nsummary(animals)\r\n\r\n\r\n   species            bodywt_kg          brainwt_kg     \r\n Length:28          Min.   :    0.02   Min.   :0.00040  \r\n Class :character   1st Qu.:    3.10   1st Qu.:0.02223  \r\n Mode  :character   Median :   53.85   Median :0.13700  \r\n                    Mean   : 4278.44   Mean   :0.57452  \r\n                    3rd Qu.:  479.00   3rd Qu.:0.42000  \r\n                    Max.   :87000.00   Max.   :5.71200  \r\n\r\nstr(animals)\r\n\r\n\r\ntibble [28 x 3] (S3: tbl_df/tbl/data.frame)\r\n $ species   : chr [1:28] \"MountainBeaver\" \"Cow\" \"GreyWolf\" \"Goat\" ...\r\n $ bodywt_kg : num [1:28] 1.4 465 36.3 27.7 1 ...\r\n $ brainwt_kg: num [1:28] 0.0081 0.423 0.1195 0.115 0.0055 ...\r\n\r\nnrow(animals)\r\n\r\n\r\n[1] 28\r\n\r\nncol(animals)\r\n\r\n\r\n[1] 3\r\n\r\nnames(animals)\r\n\r\n\r\n[1] \"species\"    \"bodywt_kg\"  \"brainwt_kg\"\r\n\r\n\r\n4 Reading and writing tibbles\r\n3.1 Create a tibble and write it\r\nLoad the package and creat the tibble:\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\nspecies <- c(\r\n  \"MountainBeaver\", \"Cow\", \"GreyWolf\", \"Goat\",\r\n  \"GuineaPig\", \"Diplodocus\", \"AsianElephant\", \"Donkey\",\r\n  \"Horse\", \"PotarMonkey\", \"Cat\", \"Giraffe\",\r\n  \"Gorilla\", \"Human\", \"AfricanElephant\", \"Triceratops\",\r\n  \"RhesusMonkey\", \"Kangaroo\", \"GoldenHamster\", \"Mouse\",\r\n  \"Rabbit\", \"Sheep\", \"Jaguar\", \"Chimpanzee\",\r\n  \"Rat\", \"Brachiosaurus\", \"Mole\", \"Pig\"\r\n)\r\n\r\nbodywt_kg <- c(\r\n  1.4, 465, 36.3, 27.7, 1., 11700, 2547, 187.1,\r\n  521, 10, 3.3, 529, 207, 62, 6654, 9400,\r\n  6.8, 35, 0.1, 0.02, 2.5, 55.5, 100, 52.2,\r\n  0.3, 87000, 0.1, 192\r\n)\r\n\r\nbrainwt_g <- c(\r\n  8.1, 423, 119.5, 115, 5.5, 50, 4603, 419, 655, 115, 25.6,\r\n  680, 406, 1320, 5712, 70, 179, 56, 1, 0.4, 12.1, 175,\r\n  157, 440, 1.9, 154.5, 3, 180\r\n)\r\n# Creating the tibble \r\nanimals <- tibble(\r\n  species = species,\r\n  bodywt_kg = bodywt_kg,\r\n  brainwt_kg = brainwt_g / 1000\r\n)\r\n\r\n\r\n\r\nWriting the data to disk:\r\n\r\n\r\nwrite_csv(x = animals, file = \"./data/animals.csv\") # write as csv\r\nwrite_tsv(x = animals, file = \"./data/animals.txt\") # write as txt\r\n\r\n\r\n\r\n3.2 Read data into R\r\nRead the same data back into R:\r\n\r\n\r\nanimals_csv <- read_csv(\"./data/animals.csv\") # read the csv\r\nanimals_tsv <- read_tsv(\"./data/animals.txt\") # read the txt\r\n\r\n\r\n\r\nIf you use the Files pane to open data files, you can view them in R Studio. For csv files, you have the additional option to click on an Import Dataset button.\r\n\r\n\r\n\r\nIf you click on this button, have the possibility to import the data set via a graphical user interface.\r\n\r\n\r\n\r\nThis is quite useful because you can preview your data and make sure that all the options are set correctly for importing. You can do this if you are not sure about the correct read_*() function arguments.\r\nJust play with these different options of reading data into R and find one that fits you best.\r\n\r\nReference\r\nWolfram Research, “Sample Data: Animal Weights” from the Wolfram Data Repository (2016) https://doi.org/10.24097/wolfram.43616.data\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:35:22+02:00"
    },
    {
      "path": "01_tasks_controller.html",
      "title": "Tasks for day 1",
      "author": [],
      "contents": "\r\n\r\nContents\r\n1 Set up an RStudio project\r\n1.1 Change settings\r\n1.2 Create an RStudio project\r\n1.3 Add an R script to the project\r\n\r\n2 Data types and vectors\r\n2.1 Type conversion\r\n2.2 Working with vectors\r\n\r\n3 Tibbles\r\n3.1 Getting started with tibbles\r\n3.2 Creating a tibble\r\n3.3 Exploring the tibble\r\n\r\n4 Reading and writing tibbles\r\n3.1 Create a tibble and write it\r\n3.2 Read data into R\r\n\r\nReference\r\n\r\n1 Set up an RStudio project\r\n1.1 Change settings\r\nBefore you get started, there is an important setting that you should change in RStudio. By default, RStudio will save an the workspace of your current session in an .Rdata file. This would allow you to start the next session exactly where you left by loading this .Rdata file.\r\nThis is not a good default. We always want to start R from a clean slate to ensure reproducibility and minimize error potential.\r\nIn RStudio go to Tools -> Global Options -> General and set the following workspace options:\r\n\r\n\r\n\r\n1.2 Create an RStudio project\r\nCreate an RStudio project that you can use for all the scripts, notes, data, etc. from this workshop.\r\nCreate a project in a directory of your choice following the instructions from the slides\r\nUse the File pane in RStudio to create a basic folder structure in your project which will be filled with files in the next days\r\ne.g. create folders for data, scripts, documents,…\r\nyou can always change the structure of your project later, but for now, we want some basic folders that we can navigate\r\n\r\nNow close the project\r\nFind the project your computer’s file explorer and open it\r\nYou can add files to your project either directly in RStudio, or in the file explorer of your operating system.\r\n1.3 Add an R script to the project\r\ncreate a new R script, save it in the appropriate folder of your project (e.g. scripts or R)\r\ncopy paste the code from below into your script\r\ndon’t worry if you don’t understand the code yet, we will learn all this later\r\n\r\nrun the code in the script line by line. Try both, running code using the Run button and the keyboard shortcut Ctrl/Cmd + Enter/Return\r\nfor each line that you run, observe what is happening to the other panes (console, environment, …) in RStudio. Can you explain what is happening?\r\n\r\n\r\n\r\n# Look at the first lines of the iris dataset\r\nhead(iris)\r\n# What is the iris dataset -> Call the help\r\n?iris\r\n# How many rows and columns does the data set have?\r\nrownum <- nrow(iris)\r\ncolnum <- ncol(iris)\r\nprint(paste0(\"The iris dataset has \", rownum, \" rows and \", colnum, \" columns.\"))\r\n# Some summary statistics on the iris data set\r\nsummary(iris)\r\n\r\n# create a plot\r\nplot(iris$Petal.Length, iris$Petal.Width, \r\n     xlab = \"Petal Length\",\r\n     ylab = \"Petal Width\",\r\n     main = \"Petal Width vs Petal Length\",\r\n     pch = 20,\r\n     col=ifelse(iris$Species == \"setosa\",\"coral1\", \r\n                ifelse(iris$Species == \"virginica\",\"cyan4\", \r\n                       ifelse(iris$Species ==  \"versicolor\",\r\n                              \"darkgoldenrod2\", \"grey\"))))\r\n# add a legend\r\nlegend(\"bottomright\", c(\"setosa\",\"virginica\", \"versicolor\"),\r\n       col = c(\"coral1\",\"cyan4\", \"darkgoldenrod2\"), pch=20)\r\n\r\n\r\n\r\n\r\n2 Data types and vectors\r\nCreate a new script for the code of this task. Use comments in your code to take notes.\r\n2.1 Type conversion\r\nLook at the vectors below. What do you think will happen?\r\n\r\n\r\nv1 <- c(1, \"a\", 2, 3)\r\nv2 <- c(TRUE, TRUE, 1, FALSE, 0)\r\nv3 <- c(0, \"23\", 5, 7)\r\nv4 <- c(4L, 6L, 23.5345)\r\n\r\n\r\n\r\nCopy the vectors to your script and check their data types using typeof.\r\nTry to explicitly convert the vectors to integer and to character. What happens?\r\n2.2 Working with vectors\r\nYou have the following vectors:\r\nspecies: name of species\r\nbodywt_kg: body weight of the species in kg\r\nbrainwt_g: brain weight of the species in g\r\n\r\n\r\nspecies <- c(\r\n  \"MountainBeaver\", \"Cow\", \"GreyWolf\", \"Goat\",\r\n  \"GuineaPig\", \"Diplodocus\", \"AsianElephant\", \"Donkey\",\r\n  \"Horse\", \"PotarMonkey\", \"Cat\", \"Giraffe\",\r\n  \"Gorilla\", \"Human\", \"AfricanElephant\", \"Triceratops\",\r\n  \"RhesusMonkey\", \"Kangaroo\", \"GoldenHamster\", \"Mouse\",\r\n  \"Rabbit\", \"Sheep\", \"Jaguar\", \"Chimpanzee\",\r\n  \"Rat\", \"Brachiosaurus\", \"Mole\", \"Pig\"\r\n)\r\n\r\nbodywt_kg <- c(\r\n  1.4, 465, 36.3, 27.7, 1., 11700, 2547, 187.1,\r\n  521, 10, 3.3, 529, 207, 62, 6654, 9400,\r\n  6.8, 35, 0.1, 0.02, 2.5, 55.5, 100, 52.2,\r\n  0.3, 87000, 0.1, 192\r\n)\r\n\r\nbrainwt_g <- c(\r\n  8.1, 423, 119.5, 115, 5.5, 50, 4603, 419, 655, 115, 25.6,\r\n  680, 406, 1320, 5712, 70, 179, 56, 1, 0.4, 12.1, 175,\r\n  157, 440, 1.9, 154.5, 3, 180\r\n)\r\n\r\n\r\n\r\nTasks\r\nCheck if the following animals are contained in the species vector:\r\n\r\n\r\nanimals_to_check <- c(\"Snail\", \"Goat\", \"Chimpanzee\", \"Rat\", \"Dragon\", \"Eagle\")\r\n\r\n\r\n\r\nConvert brain weight from g to kg and save result it in a new vector brainwt_kg\r\nCalculate mean and standard deviation of the brain weight\r\nWhich species have brain weight that is larger than the mean brain weight?\r\nWhat is the ratio of brain weight to body weight in percent? Calculate it and save the result in a new variable\r\nAre there any animals with a larger brain to body ratio than humans? If yes, which ones?\r\nHint: find the ratio for humans and save it in a variable first\r\n\r\nExtras\r\nRound the ratio vector to 4 decimal places with the round function\r\nhave a look at ?round to check out how to use it\r\n\r\nWhich animal has the smallest brain to body ratio?\r\nHint: have a look at the min function\r\n\r\nAdd the following three animals to the data vectors\r\n\r\n\r\nspecies_new <- c(\"Eagle\", \"Snail\", \"Lion\")\r\nbrainwt_g_new <- c(40, NA, 500)\r\nbodywt_kg_new <- c(18, 0.01, 550)\r\n\r\n\r\n\r\nNow calculate the mean brain weight again. Can you explain what happens? Can you fix it?\r\nhint: have a look at ?mean\r\n\r\n3 Tibbles\r\n3.1 Getting started with tibbles\r\nBefore you start the task:\r\nInstall the tibble package by calling install.packages(\"tibble\") in the console.\r\nOpen your script for the task and put library(tibble) on top\r\nExecute this line and the tibble package is loaded into your R session and ready to use\r\n3.2 Creating a tibble\r\nUse the vectors species, brainwt_kg, bodywt_kg from the last task and combine them in a tibble.\r\n3.3 Exploring the tibble\r\nExplore the tibble you created with the different function that you learned in the presentation. You can for example try\r\nview() and explore what you can do in the view window that opens: searching, filtering, sorting columns\r\nstr() to view the structure of the data\r\nsummary()\r\n…\r\n\r\n4 Reading and writing tibbles\r\n3.1 Create a tibble and write it\r\nBefore we try the read_* functions, we will create a tibble in R and save it to disk.\r\nLet’s use the tibble with animal brain and body weights. In case you don’t have it ready anymore, here is the code to create it:\r\n\r\n\r\n\r\nBefore writing the data to your R project, make sure that you created a dedicated data directory in it.\r\nNow write animals to that directory. Try writing\r\nwith comma separator as csv\r\nwith tab separator as txt\r\nCheck if the files were written into the correct folder.\r\n3.2 Read data into R\r\nNow, try to read the two data sets back into R using the appropriate read_*() functions for the separators.\r\nIf this was successful, navigate to your data directory using the Files pane of RStudio. Try clicking on both the .txt and the .csv file that you just saved there. What is different? Try the Import Dataset button for the .csv file.\r\n\r\nReference\r\nWolfram Research, “Sample Data: Animal Weights” from the Wolfram Data Repository (2016) https://doi.org/10.24097/wolfram.43616.data\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:35:23+02:00"
    },
    {
      "path": "02_solutions_controller.html",
      "title": "Solutions for day 2",
      "author": [],
      "contents": "\r\n\r\nContents\r\n1 ggplot2\r\n1.1 and 1.2 Getting started with ggplot and palmerpenguins\r\n1.3 Exploratory plotting\r\n1.4 Beautify the plots\r\n1.5 Save one of the plots on your machine\r\nReferences\r\n\r\n2 dplyr\r\n2.2 Data transformation with dplyr\r\nExtras\r\n\r\n3 tidyr\r\n4.1 Getting started with tidyr\r\n4.2 Let’s tidy some data sets\r\n\r\n\r\n1 ggplot2\r\n1.1 and 1.2 Getting started with ggplot and palmerpenguins\r\n\r\n\r\n# install.packages(\"tidyverse\")\r\n# install.packages(\"palmerpenguins\")\r\nlibrary(tidyverse)\r\nlibrary(palmerpenguins)\r\n\r\n\r\n\r\nHave a look at the penguin data set\r\n\r\n\r\npenguins\r\n\r\n\r\n\r\n\r\n# A tibble: 344 x 8\r\n  species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n  <fct>   <fct>              <dbl>         <dbl>             <int>\r\n1 Adelie  Torgersen           39.1          18.7               181\r\n2 Adelie  Torgersen           39.5          17.4               186\r\n3 Adelie  Torgersen           40.3          18                 195\r\n4 Adelie  Torgersen           NA            NA                  NA\r\n5 Adelie  Torgersen           36.7          19.3               193\r\n6 Adelie  Torgersen           39.3          20.6               190\r\n# ... with 338 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n1.3 Exploratory plotting\r\n1.3.1 Relationship between bill length and bill depth (scatterplot)\r\nWhat is the relationship between bill length and bill depth?\r\nCreate a scatterplot with bill length on the x-axis and bill depth on the y-axis\r\nCan you add a regression line?\r\nAdd species as color aesthetic. Does your interpretation of the data change?\r\nWhat is the difference between adding color as a global aesthetic or as a local aesthetic of the point layer?\r\n\r\nAdd species as shape aesthetic as well to distinguish the species\r\n\r\n\r\n# Bill length vs. bill depth scatterplot with regression line\r\nggplot(\r\n  data = penguins,\r\n  aes(\r\n    x = bill_length_mm,\r\n    y = bill_depth_mm\r\n  )\r\n) +\r\n  geom_point() +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\n\r\n\r\n\r\n# or short\r\nggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +\r\n  geom_point() +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\nIf we add the color aesthetic locally to the point layer, only this layer will be affected by it. The regression line is not separated by species but still calculated and plotted for all data points together:\r\n\r\n\r\n# Bill length vs. bill depth scatterplot with regression line\r\n# color as aesthetic local to the point layer\r\nggplot(penguins, aes(bill_length_mm, bill_depth_mm)) +\r\n  geom_point(aes(color = species)) +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\n\r\nWe can see an example of the Simpson’s paradox here. If you don’t consider species, it looks like the bill depth decreases with bill length. But after separating the data by species, we see that the effect is actually the opposite.\r\nTo draw separate regression lines for the species, we need to either add the color aesthetic to the smooth layer as well, or define the color aesthetic gloablly in the top layer ggplot call.\r\n\r\n\r\n# Option A: Define color aesthetic in smooth layer as well\r\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm)) +\r\n  geom_point(aes(color = species)) +\r\n  geom_smooth(aes(color = species),\r\n    method = \"lm\", se = FALSE\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n\r\n# Option B: Define color aesthetic once globally\r\nggplot(penguins, aes(\r\n  x = bill_length_mm,\r\n  y = bill_depth_mm,\r\n  color = species\r\n)) +\r\n  geom_point() +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\n1.3.2 Difference in flipper length between species (boxplot)\r\nIs there a difference in flipper length between the species?\r\nCreate a boxplot of the flipper length (y-axis) for the different species (x-axis)\r\nTry adding notches to the boxplots by setting notch = TRUE in the boxplot layer\r\nExtra: Add a layer with geom_point(). Try setting position = position_jitter() as argument in the point layer. What does it do?\r\n\r\n\r\n# Basic boxplot of flipper length with notches\r\nggplot(penguins, aes(species, flipper_length_mm)) +\r\n  geom_boxplot(notch = TRUE)\r\n\r\n\r\n\r\n\r\nA geom_point with position = position_jitter() will add the individual data points to the plot. It’s important to set a seed here to get the same result for the point position on the x-axis every time. Otherwise your plot is not reproducible.\r\n\r\n\r\nggplot(penguins, aes(species, flipper_length_mm)) +\r\n  geom_boxplot() +\r\n  geom_point(position = position_jitter(seed = 123))\r\n\r\n\r\n\r\n\r\n1.3.3 Differences between bodymass of male and female penguins (boxplot)\r\nAre male penguins heavier than female penguins? And is this different between the 3 species?\r\nCreate a boxplot with body mass on the y axis and sex on the x axis\r\nAdd the difference between penguin species to this plot. Try the different options ggplot offers\r\nspecies as color aesthetic\r\nspecies as fill aesthetic\r\nspecies as facet using facet_wrap\r\n\r\nExtra: What happens if you use geom_violin instead of geom_boxplot? Can you combine both geoms in one plot?\r\n\r\n\r\n# Basic boxplot of body mass for penguins of different sex\r\nggplot(penguins, aes(x = sex, y = body_mass_g)) +\r\n  geom_boxplot()\r\n\r\n\r\n\r\n\r\nSpecies as color aesthetic:\r\n\r\n\r\nggplot(penguins, aes(x = sex, \r\n                     y = body_mass_g)) +\r\n  geom_boxplot(aes(color = species))\r\n\r\n\r\n\r\n\r\nSpecies as fill aesthetic\r\n\r\n\r\nggplot(penguins, aes(x = sex, y = body_mass_g)) +\r\n  geom_boxplot(aes(fill = species))\r\n\r\n\r\n\r\n\r\nSpecies as facets:\r\n\r\n\r\nggplot(penguins, aes(x = sex, y = body_mass_g)) +\r\n  geom_boxplot() +\r\n  facet_wrap(~species)\r\n\r\n\r\n\r\n\r\nWith geom_violin\r\n\r\n\r\nggplot(penguins, aes(x = sex, y = body_mass_g)) +\r\n  geom_violin() +\r\n  geom_boxplot(width = .4) +\r\n  facet_wrap(~species)\r\n\r\n\r\n\r\n\r\n1.4 Beautify the plots\r\n1.4.1 Beatuify plots from 1.3\r\nHere are just some examples of how to make the plots from before prettier. Of course there a many other options as well.\r\nExample one: Boxplot of flipper length and species\r\n\r\n\r\nggplot(penguins, aes(species, flipper_length_mm, color = species)) +\r\n  geom_boxplot(width = 0.3) +\r\n  geom_point(\r\n    alpha = 0.5,\r\n    position = position_jitter(width = 0.2, seed = 123)\r\n  ) +\r\n  ggsci::scale_color_uchicago() +\r\n  labs(x = \"Species\", y = \"Flipper length (mm)\") +\r\n  theme_minimal() +\r\n  theme(legend.position = \"none\")\r\n\r\n\r\n\r\n\r\nWhat was changed compared to the basic plot?\r\nAdd color for each species by setting a global color aesthetic\r\nMake boxes and jitter points less wide by setting width for both layers\r\nMake jitter points slightly transparent by specifying alpha = 0.5 for the jitter layer\r\nChange the color to nicer colors from the ggsci package\r\nChange from default theme to theme_minimal()\r\nRemove the legend with legend.position = \"none\"\r\nChange the axis labels with labs()\r\nExample two: Reproducing the plot from the presentation\r\nThe following code is adapted from the palmerpengins package website.\r\n\r\n\r\nggplot(\r\n  data = penguins,\r\n  aes(\r\n    x = bill_length_mm,\r\n    y = bill_depth_mm,\r\n    color = species,\r\n    shape = species\r\n  )\r\n) +\r\n  geom_point(size = 3, alpha = 0.8) +\r\n  geom_smooth(method = \"lm\", se = FALSE) +\r\n  scale_color_manual(values = c(\"darkorange\", \"purple\", \"cyan4\")) +\r\n  labs(\r\n    title = \"Penguin bill dimensions\",\r\n    subtitle = \"Bill length and depth for Adelie, Chinstrap and Gentoo Penguins at Palmer Station LTER\",\r\n    x = \"Bill length (mm)\",\r\n    y = \"Bill depth (mm)\",\r\n    color = \"Penguin species\",\r\n    shape = \"Penguin species\"\r\n  ) +\r\n  theme_minimal() +\r\n  theme(\r\n    legend.position = c(0.85, 0.15),\r\n    legend.background = element_rect(fill = \"white\", color = NA)\r\n  )\r\n\r\n\r\n\r\n\r\nWhat was changed compared to the basic plot?\r\nMake points larger and slightly transparent by setting size and alpha for the point layer\r\nChange to custom color scale\r\nAdd title and subtitle with labs\r\nChange title of x-axis, y-axis and legend for color and shape aesthetic with labs\r\nUse theme_minimal() instead of default theme\r\nChange legend position to bottom right corner within the plot\r\nPositions are relative to the bottom left corner of the plot\r\n0.85 (85% of plot width) to the right\r\n0.15 (15% of plot height) towards the top\r\n\r\n1.5 Save one of the plots on your machine\r\nExample with one of the plots from above:\r\n\r\n\r\nflipper_box <- ggplot(penguins, aes(species, flipper_length_mm, color = species)) +\r\n  geom_boxplot(width = 0.3) +\r\n  geom_jitter(alpha = 0.5, position = position_jitter(width = 0.2, seed = 123)) +\r\n  ggsci::scale_color_uchicago() +\r\n  labs(x = \"Species\", y = \"Flipper length (mm)\") +\r\n  theme_minimal() +\r\n  theme(legend.position = \"none\")\r\n\r\n# save as png in /img directory of the project\r\nggsave(filename = \"./img/flipper_box.png\", flipper_box)\r\n# save as pdf in /img directory of the project\r\nggsave(filename = \"./img/flipper_box.pdf\", flipper_box)\r\n\r\n\r\n\r\nReferences\r\nCheck out the package website of the palmerpenguin package. They have more nice examples of data visualizations that you can do with ggplot.\r\nHorst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/. doi: 10.5281/zenodo.3960218.\r\n\r\n2 dplyr\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(palmerpenguins)\r\n\r\n\r\n\r\n\r\n\r\n\r\n2.2 Data transformation with dplyr\r\nFind all penguins that …\r\n… have a bill length between 40 and 45 mm.\r\n\r\n\r\nfilter(penguins, between(bill_length_mm, 40, 45))\r\n\r\n\r\n# A tibble: 77 x 8\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Torgersen           40.3          18                 195\r\n 2 Adelie  Torgersen           42            20.2               190\r\n 3 Adelie  Torgersen           41.1          17.6               182\r\n 4 Adelie  Torgersen           42.5          20.7               197\r\n 5 Adelie  Biscoe              40.6          18.6               183\r\n 6 Adelie  Biscoe              40.5          17.9               187\r\n 7 Adelie  Biscoe              40.5          18.9               180\r\n 8 Adelie  Dream               40.9          18.9               184\r\n 9 Adelie  Dream               42.2          18.5               180\r\n10 Adelie  Dream               40.8          18.4               195\r\n# ... with 67 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n# same as \r\n# filter(penguins, bill_length_mm < 45 & bill_length_mm > 40)\r\n\r\n\r\n\r\n… for which we know the sex.\r\n\r\n\r\nfilter(penguins, !is.na(sex))\r\n\r\n\r\n# A tibble: 333 x 8\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Torgersen           39.1          18.7               181\r\n 2 Adelie  Torgersen           39.5          17.4               186\r\n 3 Adelie  Torgersen           40.3          18                 195\r\n 4 Adelie  Torgersen           36.7          19.3               193\r\n 5 Adelie  Torgersen           39.3          20.6               190\r\n 6 Adelie  Torgersen           38.9          17.8               181\r\n 7 Adelie  Torgersen           39.2          19.6               195\r\n 8 Adelie  Torgersen           41.1          17.6               182\r\n 9 Adelie  Torgersen           38.6          21.2               191\r\n10 Adelie  Torgersen           34.6          21.1               198\r\n# ... with 323 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n… which are of the species Adelie or Gentoo and live either on Dream or on Torgersen\r\n\r\n\r\nfilter(penguins, species %in% c(\"Adelie\", \"Gentoo\") &\r\n  island %in% c(\"Dream\", \"Torgersen\"))\r\n\r\n\r\n# A tibble: 108 x 8\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Torgersen           39.1          18.7               181\r\n 2 Adelie  Torgersen           39.5          17.4               186\r\n 3 Adelie  Torgersen           40.3          18                 195\r\n 4 Adelie  Torgersen           NA            NA                  NA\r\n 5 Adelie  Torgersen           36.7          19.3               193\r\n 6 Adelie  Torgersen           39.3          20.6               190\r\n 7 Adelie  Torgersen           38.9          17.8               181\r\n 8 Adelie  Torgersen           39.2          19.6               195\r\n 9 Adelie  Torgersen           34.1          18.1               193\r\n10 Adelie  Torgersen           42            20.2               190\r\n# ... with 98 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n# or\r\n# filter(penguins, (species == \"Adelie\" | species == \"Gentoo\") &\r\n#   (island == \"Dream\" | island == \"Torgersen\"))\r\n\r\n\r\n\r\n… lived on the island Dream in the year 2007. How many of them were from each of the 3 species?\r\n\r\n\r\nfilter(penguins, island == \"Dream\" & year == 2007) %>% \r\n  count(species)\r\n\r\n\r\n# A tibble: 2 x 2\r\n  species       n\r\n  <fct>     <int>\r\n1 Adelie       20\r\n2 Chinstrap    26\r\n\r\nCount …\r\n… the number of penguins on each island.\r\n\r\n\r\ncount(penguins, island)\r\n\r\n\r\n# A tibble: 3 x 2\r\n  island        n\r\n  <fct>     <int>\r\n1 Biscoe      168\r\n2 Dream       124\r\n3 Torgersen    52\r\n\r\n… the number of penguins of each species on each island.\r\n\r\n\r\ncount(penguins, island, species)\r\n\r\n\r\n# A tibble: 5 x 3\r\n  island    species       n\r\n  <fct>     <fct>     <int>\r\n1 Biscoe    Adelie       44\r\n2 Biscoe    Gentoo      124\r\n3 Dream     Adelie       56\r\n4 Dream     Chinstrap    68\r\n5 Torgersen Adelie       52\r\n\r\nSort …\r\n… penguins to find penguins with lowest body mass\r\n\r\n\r\narrange(penguins, body_mass_g)\r\n\r\n\r\n# A tibble: 344 x 8\r\n   species   island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>     <fct>              <dbl>         <dbl>             <int>\r\n 1 Chinstrap Dream               46.9          16.6               192\r\n 2 Adelie    Biscoe              36.5          16.6               181\r\n 3 Adelie    Biscoe              36.4          17.1               184\r\n 4 Adelie    Biscoe              34.5          18.1               187\r\n 5 Adelie    Dream               33.1          16.1               178\r\n 6 Adelie    Torgersen           38.6          17                 188\r\n 7 Chinstrap Dream               43.2          16.6               187\r\n 8 Adelie    Biscoe              37.9          18.6               193\r\n 9 Adelie    Dream               37.5          18.9               179\r\n10 Adelie    Dream               37            16.9               185\r\n# ... with 334 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n… penguins to find penguins with highest body mass\r\n\r\n\r\narrange(penguins, desc(body_mass_g))\r\n\r\n\r\n# A tibble: 344 x 8\r\n   species island bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>           <dbl>         <dbl>             <int>\r\n 1 Gentoo  Biscoe           49.2          15.2               221\r\n 2 Gentoo  Biscoe           59.6          17                 230\r\n 3 Gentoo  Biscoe           51.1          16.3               220\r\n 4 Gentoo  Biscoe           48.8          16.2               222\r\n 5 Gentoo  Biscoe           45.2          16.4               223\r\n 6 Gentoo  Biscoe           49.8          15.9               229\r\n 7 Gentoo  Biscoe           48.4          14.6               213\r\n 8 Gentoo  Biscoe           49.3          15.7               217\r\n 9 Gentoo  Biscoe           55.1          16                 230\r\n10 Gentoo  Biscoe           49.5          16.2               229\r\n# ... with 334 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\n… penguins by species and sex, with longest flippers first\r\n\r\n\r\narrange(penguins, species, sex, desc(flipper_length_mm))\r\n\r\n\r\n# A tibble: 344 x 8\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Dream               35.7          18                 202\r\n 2 Adelie  Biscoe              38.6          17.2               199\r\n 3 Adelie  Biscoe              38.1          16.5               198\r\n 4 Adelie  Torgersen           39.6          17.2               196\r\n 5 Adelie  Torgersen           40.3          18                 195\r\n 6 Adelie  Torgersen           38.7          19                 195\r\n 7 Adelie  Dream               36.4          17                 195\r\n 8 Adelie  Biscoe              35.5          16.2               195\r\n 9 Adelie  Dream               36            17.8               195\r\n10 Adelie  Torgersen           36.7          19.3               193\r\n# ... with 334 more rows, and 3 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>\r\n\r\nSelect …\r\n… only the variables species, sex and year\r\n\r\n\r\nselect(penguins, species, sex, year)\r\n\r\n\r\n# A tibble: 344 x 3\r\n   species sex     year\r\n   <fct>   <fct>  <int>\r\n 1 Adelie  male    2007\r\n 2 Adelie  female  2007\r\n 3 Adelie  female  2007\r\n 4 Adelie  <NA>    2007\r\n 5 Adelie  female  2007\r\n 6 Adelie  male    2007\r\n 7 Adelie  female  2007\r\n 8 Adelie  male    2007\r\n 9 Adelie  <NA>    2007\r\n10 Adelie  <NA>    2007\r\n# ... with 334 more rows\r\n\r\n… variables based on the following vector\r\n\r\n\r\ncols <- c(\"species\", \"bill_length_mm\", \"flipper_length_mm\", \"body_mass_kg\")\r\nselect(penguins, any_of(cols))\r\n\r\n\r\n# A tibble: 344 x 3\r\n   species bill_length_mm flipper_length_mm\r\n   <fct>            <dbl>             <int>\r\n 1 Adelie            39.1               181\r\n 2 Adelie            39.5               186\r\n 3 Adelie            40.3               195\r\n 4 Adelie            NA                  NA\r\n 5 Adelie            36.7               193\r\n 6 Adelie            39.3               190\r\n 7 Adelie            38.9               181\r\n 8 Adelie            39.2               195\r\n 9 Adelie            34.1               193\r\n10 Adelie            42                 190\r\n# ... with 334 more rows\r\n\r\n# this would return  an error\r\nselect(penguins, all_of(cols))\r\n\r\n\r\nError: Can't subset columns that don't exist.\r\nx Column `body_mass_kg` doesn't exist.\r\n\r\n… only columns that contain measurements in mm\r\n\r\n\r\nselect(penguins, ends_with(\"mm\"))\r\n\r\n\r\n# A tibble: 344 x 3\r\n   bill_length_mm bill_depth_mm flipper_length_mm\r\n            <dbl>         <dbl>             <int>\r\n 1           39.1          18.7               181\r\n 2           39.5          17.4               186\r\n 3           40.3          18                 195\r\n 4           NA            NA                  NA\r\n 5           36.7          19.3               193\r\n 6           39.3          20.6               190\r\n 7           38.9          17.8               181\r\n 8           39.2          19.6               195\r\n 9           34.1          18.1               193\r\n10           42            20.2               190\r\n# ... with 334 more rows\r\n\r\n# or\r\n#select(penguins, contains(\"_mm\"))\r\n\r\n\r\n\r\nAdd a column …\r\n… with abbreviations for the species (Adelie = A, Gentoo = G, Chinstrap = C).\r\n\r\n\r\nmutate(penguins,\r\n       species_short = case_when(\r\n         species == \"Adelie\" ~ \"A\",\r\n         species == \"Gentoo\" ~ \"G\",\r\n         species == \"Chinstrap\" ~ \"C\"\r\n       ))\r\n\r\n\r\n# A tibble: 344 x 9\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Torgersen           39.1          18.7               181\r\n 2 Adelie  Torgersen           39.5          17.4               186\r\n 3 Adelie  Torgersen           40.3          18                 195\r\n 4 Adelie  Torgersen           NA            NA                  NA\r\n 5 Adelie  Torgersen           36.7          19.3               193\r\n 6 Adelie  Torgersen           39.3          20.6               190\r\n 7 Adelie  Torgersen           38.9          17.8               181\r\n 8 Adelie  Torgersen           39.2          19.6               195\r\n 9 Adelie  Torgersen           34.1          18.1               193\r\n10 Adelie  Torgersen           42            20.2               190\r\n# ... with 334 more rows, and 4 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>, species_short <chr>\r\n\r\n… with the ratio of bill length to bill depth\r\n\r\n\r\nmutate(penguins,\r\n       ratio = bill_length_mm / bill_depth_mm)\r\n\r\n\r\n# A tibble: 344 x 9\r\n   species island    bill_length_mm bill_depth_mm flipper_length_mm\r\n   <fct>   <fct>              <dbl>         <dbl>             <int>\r\n 1 Adelie  Torgersen           39.1          18.7               181\r\n 2 Adelie  Torgersen           39.5          17.4               186\r\n 3 Adelie  Torgersen           40.3          18                 195\r\n 4 Adelie  Torgersen           NA            NA                  NA\r\n 5 Adelie  Torgersen           36.7          19.3               193\r\n 6 Adelie  Torgersen           39.3          20.6               190\r\n 7 Adelie  Torgersen           38.9          17.8               181\r\n 8 Adelie  Torgersen           39.2          19.6               195\r\n 9 Adelie  Torgersen           34.1          18.1               193\r\n10 Adelie  Torgersen           42            20.2               190\r\n# ... with 334 more rows, and 4 more variables: body_mass_g <int>,\r\n#   sex <fct>, year <int>, ratio <dbl>\r\n\r\nCalculate …\r\n… mean flipper length and body mass for the 3 species and male and female penguins separately\r\n\r\n\r\npenguins %>%\r\n  group_by(species, sex) %>%\r\n  summarize(\r\n    mean_flipper = mean(flipper_length_mm, na.rm = TRUE),\r\n    mean_body = mean(body_mass_g, na.rm = TRUE)\r\n  )  \r\n\r\n\r\n# A tibble: 8 x 4\r\n# Groups:   species [3]\r\n  species   sex    mean_flipper mean_body\r\n  <fct>     <fct>         <dbl>     <dbl>\r\n1 Adelie    female         188.     3369.\r\n2 Adelie    male           192.     4043.\r\n3 Adelie    <NA>           186.     3540 \r\n4 Chinstrap female         192.     3527.\r\n5 Chinstrap male           200.     3939.\r\n6 Gentoo    female         213.     4680.\r\n7 Gentoo    male           222.     5485.\r\n8 Gentoo    <NA>           216.     4588.\r\n\r\nCan you do the same but remove the penguins for which we don’t know the sex first?\r\n\r\n\r\npenguins %>% \r\n  filter(!is.na(sex)) %>% \r\n  group_by(species, sex) %>% \r\n  summarize(\r\n    mean_flipper = mean(flipper_length_mm, na.rm = TRUE),\r\n    mean_body = mean(body_mass_g, na.rm = TRUE)\r\n  )\r\n\r\n\r\n# A tibble: 6 x 4\r\n# Groups:   species [3]\r\n  species   sex    mean_flipper mean_body\r\n  <fct>     <fct>         <dbl>     <dbl>\r\n1 Adelie    female         188.     3369.\r\n2 Adelie    male           192.     4043.\r\n3 Chinstrap female         192.     3527.\r\n4 Chinstrap male           200.     3939.\r\n5 Gentoo    female         213.     4680.\r\n6 Gentoo    male           222.     5485.\r\n\r\nExtras\r\nMake a boxplot of penguin body mass with sex on the y-axis and facets for the different species. Can you remove the penguins with missing values for sex first?\r\n\r\n\r\npenguins %>%\r\n  filter(!is.na(sex)) %>%\r\n  ggplot(aes(x = sex, y = body_mass_g)) +\r\n  geom_boxplot() +\r\n  facet_wrap(~species)\r\n\r\n\r\n\r\n\r\nMake a scatterplot with the ratio of bill length to bill depth on the y axis and flipper length on the x axis? Can you distinguish the point between male and female penguins and remove penguins with unknown sex before making the plot?\r\n\r\n\r\npenguins %>%\r\n  mutate(ratio = bill_length_mm / bill_depth_mm) %>%\r\n  filter(!is.na(sex)) %>%\r\n  ggplot(aes(x = flipper_length_mm, y = ratio, color = sex)) +\r\n  geom_point() +\r\n  scale_color_manual(values = c(\"cyan4\", \"darkorange\")) +\r\n  labs(\r\n    x = \"Flipper lenght (mm)\",\r\n    y = \"Ratio bill length / bill depth (-)\"\r\n  ) +\r\n  theme_minimal()\r\n\r\n\r\n\r\n\r\n\r\n3 tidyr\r\n4.1 Getting started with tidyr\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n4.2 Let’s tidy some data sets\r\n1. relig_income\r\nHave a look at the relig_income data set that is included in tidyverse package. The data set contains the results of a survey asking people about their religion and income category.\r\n\r\n\r\nrelig_income\r\n\r\n\r\n# A tibble: 18 x 11\r\n   religion  `<$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k`\r\n   <chr>       <dbl>     <dbl>     <dbl>     <dbl>     <dbl>     <dbl>\r\n 1 Agnostic       27        34        60        81        76       137\r\n 2 Atheist        12        27        37        52        35        70\r\n 3 Buddhist       27        21        30        34        33        58\r\n 4 Catholic      418       617       732       670       638      1116\r\n 5 Don’t kn~      15        14        15        11        10        35\r\n 6 Evangeli~     575       869      1064       982       881      1486\r\n 7 Hindu           1         9         7         9        11        34\r\n 8 Historic~     228       244       236       238       197       223\r\n 9 Jehovah'~      20        27        24        24        21        30\r\n10 Jewish         19        19        25        25        30        95\r\n11 Mainline~     289       495       619       655       651      1107\r\n12 Mormon         29        40        48        51        56       112\r\n13 Muslim          6         7         9        10         9        23\r\n14 Orthodox       13        17        23        32        32        47\r\n15 Other Ch~       9         7        11        13        13        14\r\n16 Other Fa~      20        33        40        46        49        63\r\n17 Other Wo~       5         2         3         4         2         7\r\n18 Unaffili~     217       299       374       365       341       528\r\n# ... with 4 more variables: $75-100k <dbl>, $100-150k <dbl>,\r\n#   >150k <dbl>, Don't know/refused <dbl>\r\n\r\nWhat is not tidy about this data set? Can you fix it?\r\n The variable income is spread across multiple columns, so we have to use pivot_longer to pivot the columns containing the income information:\r\n\r\n\r\npivot_longer(relig_income,\r\n             cols = !religion,\r\n             names_to = \"income\",\r\n             values_to = \"count\"\r\n             )\r\n\r\n\r\n# A tibble: 180 x 3\r\n   religion income             count\r\n   <chr>    <chr>              <dbl>\r\n 1 Agnostic <$10k                 27\r\n 2 Agnostic $10-20k               34\r\n 3 Agnostic $20-30k               60\r\n 4 Agnostic $30-40k               81\r\n 5 Agnostic $40-50k               76\r\n 6 Agnostic $50-75k              137\r\n 7 Agnostic $75-100k             122\r\n 8 Agnostic $100-150k            109\r\n 9 Agnostic >150k                 84\r\n10 Agnostic Don't know/refused    96\r\n# ... with 170 more rows\r\n\r\n2. billboard\r\nHave a look at the billboard data set that is included in the tidyverse package. The data set contains information about the chart rank of songs in the year 2000.\r\n\r\n\r\nbillboard\r\n\r\n\r\n# A tibble: 317 x 79\r\n   artist track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7\r\n   <chr>  <chr> <date>       <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\r\n 1 2 Pac  Baby~ 2000-02-26      87    82    72    77    87    94    99\r\n 2 2Ge+h~ The ~ 2000-09-02      91    87    92    NA    NA    NA    NA\r\n 3 3 Doo~ Kryp~ 2000-04-08      81    70    68    67    66    57    54\r\n 4 3 Doo~ Loser 2000-10-21      76    76    72    69    67    65    55\r\n 5 504 B~ Wobb~ 2000-04-15      57    34    25    17    17    31    36\r\n 6 98^0   Give~ 2000-08-19      51    39    34    26    26    19     2\r\n 7 A*Tee~ Danc~ 2000-07-08      97    97    96    95   100    NA    NA\r\n 8 Aaliy~ I Do~ 2000-01-29      84    62    51    41    38    35    35\r\n 9 Aaliy~ Try ~ 2000-03-18      59    53    38    28    21    18    16\r\n10 Adams~ Open~ 2000-08-26      76    76    74    69    68    67    61\r\n# ... with 307 more rows, and 69 more variables: wk8 <dbl>,\r\n#   wk9 <dbl>, wk10 <dbl>, wk11 <dbl>, wk12 <dbl>, wk13 <dbl>,\r\n#   wk14 <dbl>, wk15 <dbl>, wk16 <dbl>, wk17 <dbl>, wk18 <dbl>,\r\n#   wk19 <dbl>, wk20 <dbl>, wk21 <dbl>, wk22 <dbl>, wk23 <dbl>,\r\n#   wk24 <dbl>, wk25 <dbl>, wk26 <dbl>, wk27 <dbl>, wk28 <dbl>,\r\n#   wk29 <dbl>, wk30 <dbl>, wk31 <dbl>, wk32 <dbl>, wk33 <dbl>,\r\n#   wk34 <dbl>, wk35 <dbl>, wk36 <dbl>, wk37 <dbl>, wk38 <dbl>,\r\n#   wk39 <dbl>, wk40 <dbl>, wk41 <dbl>, wk42 <dbl>, wk43 <dbl>,\r\n#   wk44 <dbl>, wk45 <dbl>, wk46 <dbl>, wk47 <dbl>, wk48 <dbl>,\r\n#   wk49 <dbl>, wk50 <dbl>, wk51 <dbl>, wk52 <dbl>, wk53 <dbl>,\r\n#   wk54 <dbl>, wk55 <dbl>, wk56 <dbl>, wk57 <dbl>, wk58 <dbl>,\r\n#   wk59 <dbl>, wk60 <dbl>, wk61 <dbl>, wk62 <dbl>, wk63 <dbl>,\r\n#   wk64 <dbl>, wk65 <dbl>, wk66 <lgl>, wk67 <lgl>, wk68 <lgl>,\r\n#   wk69 <lgl>, wk70 <lgl>, wk71 <lgl>, wk72 <lgl>, wk73 <lgl>,\r\n#   wk74 <lgl>, wk75 <lgl>, wk76 <lgl>\r\n\r\nWhat is not tidy about this data set? Can you fix it?\r\n The variable week is spread across multiple columns. We have to use pivot longer to pivot the week columns:\r\n\r\n\r\npivot_longer(billboard,\r\n             cols = wk1:wk76,\r\n             names_to = \"week\",\r\n             values_to = \"rank\")\r\n\r\n\r\n# A tibble: 24,092 x 5\r\n   artist track                   date.entered week   rank\r\n   <chr>  <chr>                   <date>       <chr> <dbl>\r\n 1 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1      87\r\n 2 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2      82\r\n 3 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3      72\r\n 4 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4      77\r\n 5 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5      87\r\n 6 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6      94\r\n 7 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk7      99\r\n 8 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk8      NA\r\n 9 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk9      NA\r\n10 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk10     NA\r\n# ... with 24,082 more rows\r\n\r\nExtras\r\nThe argument values_drop_na drops rows with missing values in the rank column. Here it makes sense because not every song is in the charts for all 76 weeks.\r\nWith the names_prefix argument we can remove the wk before the values of the week variable. This makes it easier to work with later.\r\n\r\n\r\npivot_longer(billboard,\r\n             cols = wk1:wk76,\r\n             names_to = \"week\",\r\n             names_prefix = \"wk\",\r\n             values_to = \"rank\",\r\n             values_drop_na = TRUE)\r\n\r\n\r\n# A tibble: 5,307 x 5\r\n   artist  track                   date.entered week   rank\r\n   <chr>   <chr>                   <date>       <chr> <dbl>\r\n 1 2 Pac   Baby Don't Cry (Keep... 2000-02-26   1        87\r\n 2 2 Pac   Baby Don't Cry (Keep... 2000-02-26   2        82\r\n 3 2 Pac   Baby Don't Cry (Keep... 2000-02-26   3        72\r\n 4 2 Pac   Baby Don't Cry (Keep... 2000-02-26   4        77\r\n 5 2 Pac   Baby Don't Cry (Keep... 2000-02-26   5        87\r\n 6 2 Pac   Baby Don't Cry (Keep... 2000-02-26   6        94\r\n 7 2 Pac   Baby Don't Cry (Keep... 2000-02-26   7        99\r\n 8 2Ge+her The Hardest Part Of ... 2000-09-02   1        91\r\n 9 2Ge+her The Hardest Part Of ... 2000-09-02   2        87\r\n10 2Ge+her The Hardest Part Of ... 2000-09-02   3        92\r\n# ... with 5,297 more rows\r\n\r\n3. fish_encounters\r\nHave a look at the fish_encounters data set that is included in the tidyverse package. The data set contains records of fish detected by different automatic monitoring stations.\r\n\r\n\r\nfish_encounters\r\n\r\n\r\n# A tibble: 114 x 3\r\n   fish  station  seen\r\n   <fct> <fct>   <int>\r\n 1 4842  Release     1\r\n 2 4842  I80_1       1\r\n 3 4842  Lisbon      1\r\n 4 4842  Rstr        1\r\n 5 4842  Base_TD     1\r\n 6 4842  BCE         1\r\n 7 4842  BCW         1\r\n 8 4842  BCE2        1\r\n 9 4842  BCW2        1\r\n10 4842  MAE         1\r\n# ... with 104 more rows\r\n\r\nThe column seen only contains values of 1 to indicate that the fish was seen at the respective station.\r\n\r\n\r\nsummary(fish_encounters)\r\n\r\n\r\n      fish       station        seen  \r\n 4842   :11   Release:19   Min.   :1  \r\n 4843   :11   I80_1  :19   1st Qu.:1  \r\n 4844   :11   Lisbon :13   Median :1  \r\n 4858   :11   Rstr   :12   Mean   :1  \r\n 4861   :11   Base_TD:11   3rd Qu.:1  \r\n 4857   : 9   BCE    : 8   Max.   :1  \r\n (Other):50   (Other):32              \r\n\r\nWhat is not tidy about this data set? Can you fix it?\r\n An observation (i.e. one fish) is spread across multiple rows and we have to use pivot_wider to give each fish just one row.\r\n\r\n\r\npivot_wider(fish_encounters, \r\n            names_from = station,\r\n            values_from = seen)\r\n\r\n\r\n# A tibble: 19 x 12\r\n   fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2\r\n   <fct>   <int> <int>  <int> <int>   <int> <int> <int> <int> <int>\r\n 1 4842        1     1      1     1       1     1     1     1     1\r\n 2 4843        1     1      1     1       1     1     1     1     1\r\n 3 4844        1     1      1     1       1     1     1     1     1\r\n 4 4845        1     1      1     1       1    NA    NA    NA    NA\r\n 5 4847        1     1      1    NA      NA    NA    NA    NA    NA\r\n 6 4848        1     1      1     1      NA    NA    NA    NA    NA\r\n 7 4849        1     1     NA    NA      NA    NA    NA    NA    NA\r\n 8 4850        1     1     NA     1       1     1     1    NA    NA\r\n 9 4851        1     1     NA    NA      NA    NA    NA    NA    NA\r\n10 4854        1     1     NA    NA      NA    NA    NA    NA    NA\r\n11 4855        1     1      1     1       1    NA    NA    NA    NA\r\n12 4857        1     1      1     1       1     1     1     1     1\r\n13 4858        1     1      1     1       1     1     1     1     1\r\n14 4859        1     1      1     1       1    NA    NA    NA    NA\r\n15 4861        1     1      1     1       1     1     1     1     1\r\n16 4862        1     1      1     1       1     1     1     1     1\r\n17 4863        1     1     NA    NA      NA    NA    NA    NA    NA\r\n18 4864        1     1     NA    NA      NA    NA    NA    NA    NA\r\n19 4865        1     1      1    NA      NA    NA    NA    NA    NA\r\n# ... with 2 more variables: MAE <int>, MAW <int>\r\n\r\nExtra\r\nThe values_fill argument can be used to enter values in cells where values are missing. In our case this makes sense because cells with missing values are not really missing information but we know that for this station the fish was not recorded. So we can add a 0 instead of NA.\r\n\r\n\r\npivot_wider(fish_encounters, \r\n            names_from = station,\r\n            values_from = seen,\r\n            values_fill = 0)\r\n\r\n\r\n# A tibble: 19 x 12\r\n   fish  Release I80_1 Lisbon  Rstr Base_TD   BCE   BCW  BCE2  BCW2\r\n   <fct>   <int> <int>  <int> <int>   <int> <int> <int> <int> <int>\r\n 1 4842        1     1      1     1       1     1     1     1     1\r\n 2 4843        1     1      1     1       1     1     1     1     1\r\n 3 4844        1     1      1     1       1     1     1     1     1\r\n 4 4845        1     1      1     1       1     0     0     0     0\r\n 5 4847        1     1      1     0       0     0     0     0     0\r\n 6 4848        1     1      1     1       0     0     0     0     0\r\n 7 4849        1     1      0     0       0     0     0     0     0\r\n 8 4850        1     1      0     1       1     1     1     0     0\r\n 9 4851        1     1      0     0       0     0     0     0     0\r\n10 4854        1     1      0     0       0     0     0     0     0\r\n11 4855        1     1      1     1       1     0     0     0     0\r\n12 4857        1     1      1     1       1     1     1     1     1\r\n13 4858        1     1      1     1       1     1     1     1     1\r\n14 4859        1     1      1     1       1     0     0     0     0\r\n15 4861        1     1      1     1       1     1     1     1     1\r\n16 4862        1     1      1     1       1     1     1     1     1\r\n17 4863        1     1      0     0       0     0     0     0     0\r\n18 4864        1     1      0     0       0     0     0     0     0\r\n19 4865        1     1      1     0       0     0     0     0     0\r\n# ... with 2 more variables: MAE <int>, MAW <int>\r\n\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:35:39+02:00"
    },
    {
      "path": "02_tasks_controller.html",
      "title": "Tasks for day 2",
      "author": [],
      "contents": "\r\n\r\nContents\r\n1 ggplot2\r\n1.1 Getting started with ggplot and the tidyverse\r\n1.2 Getting the data\r\n1.3 Exploratory plotting\r\n1.4 Beautify the plots\r\n1.5 Save one of the plots on your machine\r\nReferences\r\n\r\n2 dplyr\r\n2.1 Getting started with dplyr\r\n2.2 Data transformation with dplyr\r\nExtras\r\n\r\n3 tidyr\r\n4.1 Getting started with tidyr\r\n4.2 Let’s tidy some data sets\r\n\r\n\r\n1 ggplot2\r\n1.1 Getting started with ggplot and the tidyverse\r\nA helpful resource for to consult for this task can be the ggplot2 cheatsheet.\r\nBefore you start, make sure to install the tidyverse packages by calling\r\n\r\n\r\ninstall.packages(\"tidyverse\")\r\n\r\n\r\n\r\nThis will install ggplot2 along with other tidyverse packages.\r\nRemember to put library(tidyverse) (or library(ggplot2)) on top of your script to access the ggplot functions.\r\n1.2 Getting the data\r\nTo practice plotting with the ggplot2 package, we will use a data set on 3 species of penguins on islands in Antarctica.\r\n\r\n\r\n\r\nFigure 1: Artwork by Allison Horst\r\n\r\n\r\n\r\nThe data is available from the palmerpenguins package. To get it, you have to:\r\nInstall the package with install.packages(\"palmerpenguins\")\r\nLoad the package at the beginning of your script with library(palmerpenguins)\r\nAfter you have done that, take a moment to get familiar with the data set and its variables. The data set is called penguins: - The data set is available after you loaded the package - Just type penguins in the console and you should see the penguin tibble\r\n1.3 Exploratory plotting\r\nExplore the data set and it’s variables with ggplot. Below, you find some ideas and tasks for plots. I suggest you start with one of them. If you have your own ideas for interesting plots with the penguin data set, feel free to do them instead of continuing with the tasks.\r\nIn the exploratory section, don’t care too much about the beauty of your plots and just use the default theme and colors. This is about exploring the data and testing different visualization options in ggplot.\r\n1.3.1 Relationship between bill length and bill depth (scatterplot)\r\nWhat is the relationship between bill length and bill depth?\r\nCreate a scatterplot with bill length on the x-axis and bill depth on the y-axis\r\nCan you add a regression line?\r\nAdd species as color aesthetic. Does your interpretation of the data change?\r\nWhat is the difference between adding color as a global aesthetic or as a local aesthetic of the point layer?\r\n\r\nAdd species as shape aesthetic as well to distinguish the species\r\n1.3.2 Difference in flipper length between species (boxplot)\r\nIs there a difference in flipper length between the species?\r\nCreate a boxplot of the flipper length (y-axis) for the different species (x-axis)\r\nTry adding notches to the boxplots by setting notch = TRUE in the boxplot layer\r\nExtra: Add a layer with geom_point(). Try setting position = position_jitter() as argument in the point layer. What does it do?\r\n1.3.3 Differences between bodymass of male and female penguins (boxplot)\r\nAre male penguins heavier than female penguins? And is this different between the 3 species?\r\nCreate a boxplot with body mass on the y axis and sex on the x axis\r\nAdd the difference between penguin species to this plot. Try the different options ggplot offers\r\nspecies as color aesthetic\r\nspecies as fill aesthetic\r\nspecies as facet using facet_wrap\r\n\r\nExtra: What happens if you use geom_violin instead of geom_boxplot? Can you combine both geoms in one plot?\r\n1.4 Beautify the plots\r\nAlso here: Chose the task that you like more.\r\n1.4.1 Beautify the plots from 1.3\r\nTake the plot from before that you liked the most and try to make it look nice.\r\nHere’s a list of ideas:\r\nAdd a theme layer\r\nCustomize the theme, e.g.\r\nChange the position of the legend\r\nMake the axis titles bold\r\n\r\nChange the color/fill scale of the plot\r\nUse scale_color_manual or scale_fill_manual\r\nTry scale_color_viridis_d() or scale_fill_viridis_d() with different options\r\nTry a color scale from an additional package, e.g. ggsci::scale_color_uchicago() or ggsci::scale_fill_uchicago()\r\nFirst you have to install the ggsci package\r\n\r\n\r\nChange the labels of the x- and y-axis and add a title to the plot\r\n…\r\n1.4.2 Can you reproduce this plot?\r\nTake a look at the plot, we discussed during the presentation:\r\n\r\n\r\n\r\nFigure 2: Visualization from the palmerpenguins package\r\n\r\n\r\n\r\nCan you reproduce this plot? It is similar to the one from Task 1.3.1.\r\nThe colors that are used are:\r\n\r\n\r\npenguin_cols <- c(\"darkorange\", \"purple\", \"cyan4\")\r\n\r\n\r\n\r\n1.5 Save one of the plots on your machine\r\nSave one of the plots you produced in a variable and then use ggsave to save the plot on your machine. Save the plot in a dedicated plot directory in your RStudio project.\r\nReferences\r\nHorst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. https://allisonhorst.github.io/palmerpenguins/. doi: 10.5281/zenodo.3960218.\r\n\r\n2 dplyr\r\n2.1 Getting started with dplyr\r\nA helpful resource for to consult for this task can be the dplyr cheatsheet.\r\nBefore you start, make sure to load the tidyverse package and the palmerpenguins package.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(palmerpenguins)\r\n\r\n\r\n\r\n2.2 Data transformation with dplyr\r\nIn the following, you find a lot of different data transformation tasks. First, do 2 from each category before you do the remaining ones. You don’t have to finish all the tasks but make sure you covered each category.\r\nFind all penguins that …\r\n… have a bill length between 40 and 45 mm.\r\n… for which we know the sex.\r\n… which are of the species Adelie or Gentoo and live either on Dream or on Torgersen\r\n… lived on the island Dream in the year 2007. How many of them were from each of the 3 species?\r\nCount …\r\n… the number of penguins on each island.\r\n… the number of penguins of each species on each island.\r\nSort …\r\n… penguins to find penguins with lowest body mass\r\n… penguins to find penguins with highest body mass\r\n… penguins by species and sex, with longest flippers first\r\nSelect …\r\n… only the variables species, sex and year\r\n… variables based on the following vector\r\n\r\n\r\n\r\n… only columns that contain measurements in mm\r\nAdd a column …\r\n… with abbreviations for the species (Adelie = A, Gentoo = G, Chinstrap = C).\r\n… with the ratio of bill length to bill depth\r\nCalculate …\r\n… mean flipper length and body mass for the 3 species and male and female penguins separately\r\nCan you do the same but remove the penguins for which we don’t know the sex first?\r\nExtras\r\nMake a boxplot of penguin body mass with sex on the y-axis and facets for the different species. Can you remove the penguins with missing values for sex first?\r\nMake a scatterplot with the ratio of bill length to bill depth on the y axis and flipper length on the x axis? Can you distinguish the point between male and female penguins and remove penguins with unknown sex before making the plot?\r\n\r\n3 tidyr\r\n4.1 Getting started with tidyr\r\nBefore you start, make sure to load the tidyverse package.\r\n\r\n\r\n\r\n4.2 Let’s tidy some data sets\r\n1. relig_incom\r\nHave a look at the relig_income data set that is included in tidyverse package. The data set contains the results of a survey asking people about their religion and income category.\r\nWhat is not tidy about this data set? Can you fix it?\r\n2. billboard\r\nHave a look at the billboard data set that is included in the tidyverse package. The data set contains information about the chart rank of songs in the year 2000.\r\nWhat is not tidy about this data set? Can you fix it?\r\nExtras\r\nCheck out the values_drop_na argument of pivot_longer. What does it do and how can you use it here?\r\nCheck out the names_prefix argument of pivot_longer. What does it do and how can you use it here?\r\n3. fish_encounters\r\nHave a look at the fish_encounters data set that is included in the tidyverse package. The data set contains records of fish detected by different automatic monitoring stations. Check out summary(fish_encounters) - the column seen only contains values of 1 to indicate that the fish was seen at the respective station.\r\nWhat is not tidy about this data set? Can you fix it?\r\nExtra\r\nHave a look at the values_fill argument of pivot_wider. How could you use it in this case to replace the missing values that are created?\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:35:41+02:00"
    },
    {
      "path": "03_solutions_controller.html",
      "title": "Tasks for day 3",
      "author": [],
      "contents": "\r\n\r\nContents\r\n1 Linear models\r\n1.1 Getting started\r\n1.2 Linear regression\r\n1.3 Analysis of covariance\r\n1.4 Anova\r\n\r\n2 Linear models transformation\r\n3 Poisson and binary glm\r\n3 Proportion glm\r\n\r\n1 Linear models\r\n1.1 Getting started\r\n\r\n\r\n#install.packages(\"performance\")\r\nlibrary(palmerpenguins)\r\nlibrary(tidyverse)\r\nlibrary(performance)\r\n\r\n\r\n\r\n1.2 Linear regression\r\nIt looks like the bill depth increases with increasing bill length.\r\n\r\n\r\ng <- ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm)) +\r\n  geom_point()\r\ng\r\n\r\n\r\n\r\n\r\nFit a linear model to test this relationship\r\nCheck for significant effects\r\nThe result of drop1 shows that if we remove the bill length from the model, we significantly increase the RSS. The model with bill length is the better model and we can assume a significant relationship between bill lenght and bill depth.\r\n\r\n\r\nlm1 <- lm(bill_depth_mm ~ bill_length_mm, data = penguins)\r\ndrop1(lm1, test = \"F\")\r\n\r\n\r\nSingle term deletions\r\n\r\nModel:\r\nbill_depth_mm ~ bill_length_mm\r\n               Df Sum of Sq    RSS    AIC F value    Pr(>F)    \r\n<none>                      1256.4 449.00                      \r\nbill_length_mm  1    73.473 1329.8 466.44  19.884 0.0000112 ***\r\n---\r\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\r\n\r\nCheck the model assumptions using diagnostic plots\r\n\r\n\r\nperformance::check_model(lm1)\r\n\r\n\r\n\r\n\r\nThe diagnostic plots do not look perfect. The reason for this is probably that we did not consider all variable that we should have in the model. Maybe by adding the species as a predictor, we can improve the diagnostic plots?\r\nCan you add the model result to the scatter plot?\r\n\r\n\r\n# Option 1: geom_smooth\r\ng +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\n\r\n\r\n\r\n# Option 2: extract coefficients\r\nintercept <- lm1$coefficients[1]\r\nslope <- lm1$coefficients[2]\r\ng +\r\n  geom_abline(slope = slope, intercept = intercept)\r\n\r\n\r\n\r\n\r\n\r\n\r\n# Option 3: using predict (this is a bit overkill for this simple example)\r\n# Create data to predict from\r\npred_dat <- tibble(\r\n  bill_length_mm = seq(\r\n    from = min(penguins$bill_length_mm, na.rm = TRUE),\r\n    to = max(penguins$bill_length_mm, na.rm = TRUE)\r\n  )\r\n)\r\n# Predict the response and add it to pred_data\r\npred_dat$bill_depth_mm <- predict(lm1, newdata = pred_dat)\r\n# Add a line with the new predicted data\r\ng +\r\n  geom_line(data = pred_dat, color = \"cyan4\")\r\n\r\n\r\n\r\n\r\n1.3 Analysis of covariance\r\nDoes the relationship between bill length and bill depth differ between penguin species?\r\n\r\n\r\ng2 <- ggplot(penguins, aes(x = bill_length_mm, \r\n                     y = bill_depth_mm,\r\n                     color = species)) +\r\n  geom_point()\r\ng2\r\n\r\n\r\n\r\n\r\nNow fit the linear model again, this time including species as explanatory variable.\r\n\r\n\r\n# Without interaction\r\nlm2a <- lm(bill_depth_mm ~ bill_length_mm + species, data = penguins)\r\n# Without interaction\r\nlm2b <- lm(bill_depth_mm ~ bill_length_mm * species, data = penguins)\r\n\r\n\r\n\r\nTest model assumptions for both models.\r\nBoth models don’t violate the assumptions for linear models and the diagnostic plots look much better than the one for the model without species.\r\nNote that the diagnostic plots show a high collinearity between explanatory variables. This makes sense because of course the interaction between species and bill length is highly correlated with both species and bill length. However, in the case of this interaction it is not a problem, so we can ignore this.\r\n\r\n\r\ncheck_model(lm2a)\r\n\r\n\r\n\r\ncheck_model(lm2b)\r\n\r\n\r\n\r\n\r\nCheck for significant effects in both models\r\n\r\n\r\ndrop1(lm2a)\r\n\r\n\r\nSingle term deletions\r\n\r\nModel:\r\nbill_depth_mm ~ bill_length_mm + species\r\n               Df Sum of Sq     RSS    AIC\r\n<none>                       307.20 -28.70\r\nbill_length_mm  1    118.67  425.87  81.01\r\nspecies         2    949.16 1256.36 449.00\r\n\r\ndrop1(lm2b)\r\n\r\n\r\nSingle term deletions\r\n\r\nModel:\r\nbill_depth_mm ~ bill_length_mm * species\r\n                       Df Sum of Sq    RSS     AIC\r\n<none>                              306.32 -25.676\r\nbill_length_mm:species  2   0.87243 307.20 -28.704\r\n\r\nI will choose to plot the simpler model without the interaction because the interaction between species and bill length is not significant. Generally, a model should be as simple as possible (of course without loosing explanatory power).\r\nTo plot the model with interaction I could conveniently use geom_smooth\r\n\r\n\r\ng2 +\r\n  geom_smooth(method = \"lm\", se = FALSE)\r\n\r\n\r\n\r\n\r\nTo plot th model without interaction, you can either extract the model coefficients or use the predict function.\r\nExtracting the model coefficients starts to become complicated, as we have 3 intercepts and 1 slope to extract:\r\n\r\n\r\n# Option 1: extract model coefficients\r\nintercept_adelie <- lm2a$coefficients[1]\r\nslope <- lm2a$coefficients[2]\r\nintercept_chinstrap <- intercept_adelie + lm2a$coefficients[3]\r\nintercept_gentoo <- intercept_adelie + lm2a$coefficients[4]\r\n\r\n# lets add some custom colors\r\ncols <- c(\"darkorange\", \"cyan4\", \"purple\")\r\n\r\ng2 +\r\n  geom_abline(slope = slope, intercept = intercept_adelie, color = cols[1]) +\r\n  geom_abline(slope = slope, intercept = intercept_chinstrap, color = cols[2]) +\r\n  geom_abline(slope = slope, intercept = intercept_gentoo, color = cols[3]) +\r\n  scale_color_manual(values = cols)\r\n\r\n\r\n\r\n\r\nIt is easier to use the predict function in this case:\r\n\r\n\r\npred_dat <- expand_grid(\r\n  bill_length_mm = min(penguins$bill_length_mm, na.rm = TRUE):max(penguins$bill_length_mm, na.rm = TRUE),\r\n  species = c(\"Adelie\", \"Chinstrap\", \"Gentoo\")\r\n)\r\npred_dat$bill_depth_mm <- predict(lm2a, newdata = pred_dat)\r\n\r\ng2 +\r\n  geom_line(data = pred_dat) +\r\n  ggsci::scale_color_futurama()\r\n\r\n\r\n\r\n\r\n1.4 Anova\r\nDo male and female penguins differ in weight and does this depend on the species?\r\nFirst, we create a subset without penguins for which the sex is unknown\r\n\r\n\r\npenguins_sex <- filter(penguins, !is.na(sex))\r\n\r\n\r\n\r\nThe question can be represented for example with a boxplot\r\n\r\n\r\nggplot(penguins_sex, aes(x = species, y = body_mass_g, fill = sex)) +\r\n  geom_boxplot(notch = TRUE)\r\n\r\n\r\n\r\n\r\nFit a linear model that represents this question\r\n\r\n\r\n# Without interaction\r\nlm3a <- lm(body_mass_g ~ sex + species, data = penguins_sex)\r\n# Without interaction\r\nlm3b <- lm(body_mass_g ~ sex + species + sex:species, data = penguins_sex)\r\n\r\n\r\n\r\nTest for significant predictors\r\nBoth the single effect and the interaction is significant.\r\n\r\n\r\ndrop1(lm3a, test = \"F\")\r\n\r\n\r\nSingle term deletions\r\n\r\nModel:\r\nbody_mass_g ~ sex + species\r\n        Df Sum of Sq       RSS    AIC F value                Pr(>F)\r\n<none>                32979185 3838.6                              \r\nsex      1  37090262  70069447 4087.5  370.01 < 0.00000000000000022\r\nspecies  2 143401584 176380769 4392.9  715.29 < 0.00000000000000022\r\n           \r\n<none>     \r\nsex     ***\r\nspecies ***\r\n---\r\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\r\n\r\ndrop1(lm3b, test = \"F\")\r\n\r\n\r\nSingle term deletions\r\n\r\nModel:\r\nbody_mass_g ~ sex + species + sex:species\r\n            Df Sum of Sq      RSS    AIC F value    Pr(>F)    \r\n<none>                   31302628 3825.2                      \r\nsex:species  2   1676557 32979185 3838.6   8.757 0.0001973 ***\r\n---\r\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\r\n\r\nBoth look fine. Model can be used.\r\n\r\n\r\ncheck_model(lm3a)\r\n\r\n\r\n\r\ncheck_model(lm3b)\r\n\r\n\r\n\r\n\r\nExtra\r\nSome other plots with which we can represent the results of the Anova.\r\n\r\n\r\npenguins_sex %>%\r\n  ggplot(aes(\r\n    x = species,\r\n    y = body_mass_g,\r\n    color = sex\r\n  )) +\r\n  geom_boxplot() +\r\n  geom_point(\r\n    size = 2, alpha = 0.5,\r\n    position = position_jitterdodge(\r\n      seed = 123\r\n    )\r\n  ) +\r\n  coord_flip() +\r\n  ggsci::scale_color_d3() +\r\n  labs(y = \"Body mass [g]\", x = \"Species\") +\r\n  theme_bw() +\r\n  theme(legend.position = c(0.85, 0.15))\r\n\r\n\r\n\r\n\r\n\r\n\r\nsummary <- penguins_sex %>%\r\n  group_by(species, sex) %>%\r\n  summarize(\r\n    sd = sd(body_mass_g),\r\n    mean = mean(body_mass_g)\r\n  )\r\n\r\nggplot(summary, aes(x = species, y = mean, color = sex)) +\r\n  geom_point(position = position_dodge(0.4)) +\r\n  geom_errorbar(\r\n    aes(ymin = mean - sd, ymax = mean + sd),\r\n    position = position_dodge(0.4),\r\n    width = 0.2\r\n  ) +\r\n  scale_color_manual(values = c(\"#00AFBB\", \"#E7B800\")) +\r\n  labs(y = \"Body mass [g]\")\r\n\r\n\r\n\r\n\r\n\r\n\r\nggplot(summary, aes(x = species, y = mean, fill = sex)) +\r\n  geom_col(position = position_dodge(0.8)) +\r\n  geom_errorbar(\r\n    aes(ymin = mean - sd, ymax = mean + sd),\r\n    position = position_dodge(0.8),\r\n    width = 0.2\r\n  ) +\r\n  scale_fill_manual(values = c(\"#00AFBB\", \"#E7B800\")) +\r\n  labs(y = \"Body mass [g]\")\r\n\r\n\r\n\r\n\r\n\r\n2 Linear models transformation\r\nNo tasks yet\r\n\r\n3 Poisson and binary glm\r\nNo tasks yet\r\n\r\n3 Proportion glm\r\nNo tasks yet\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:36:03+02:00"
    },
    {
      "path": "03_tasks_controller.html",
      "title": "Tasks for day 3",
      "author": [],
      "contents": "\r\n\r\nContents\r\n1 Linear models\r\n1.1 Getting started\r\n1.2 Linear regression\r\n1.3 Analysis of covariance\r\n1.4 Anova\r\n\r\n2 Linear models with transformation\r\n3 Poisson and binary glm\r\n3 Proportion glm\r\n\r\n1 Linear models\r\n1.1 Getting started\r\nBefore you get started with the exercise, make sure that you load the palmerpenguins package and the tidyverse\r\n\r\n\r\n\r\nTo test the assumptions of linear models, we will use the performance package. Make sure you install it once and then load it:\r\n\r\n\r\n\r\nThe performance package depends on other packages. It might happen that you encounter an error when trying to load or use the package for the first time. Just read the error message and install the missing packages with install.packages() (likely this will be the case for the qqplotr package).\r\n1.2 Linear regression\r\nLet’s start with a simple linear regression.\r\nDoes the bill depth in crease with bill length?\r\nMake a scatter plot of bill length on the x and bill depth on the y axis.\r\nNow:\r\nFit a linear model to test this relationship\r\nCheck for significant effects: What do the results mean?\r\nCheck the model assumptions using diagnostic plots\r\nWhat do you think? Are the assumptions violated or do the plots look okay?\r\nCan you add the model result to the scatter plot?\r\n1.3 Analysis of covariance\r\nDoes the relationship between bill length and bill depth differ between penguin species?\r\nAdd the species variable to the scatter plot from 1.2\r\nFit the linear model again, including species as second explanatory variable\r\nFit two different models:\r\nEffect of bill length and species on bill depth with interaction 2 . Effect of bill length and species on bill depth without interaction\r\n\r\n\r\nTest model assumptions for both models.\r\nCheck for significant effects in both models\r\nWhich model would you choose? It the model results in the scatter plot from before.\r\n1.4 Anova\r\nDo male and female penguins differ in weight and does this depend on the species?\r\nBefore you start exploring this question, remove penguins with missing sex variable from the data\r\nThink of a plot that can represent this question\r\nFit a linear model that represents this question\r\nTest for significant predictors\r\nTest model assumptions\r\nExtra\r\nImprove the looks of the Anova result plot. You can be as creative as you want, e.g. take inspiration from plots you saw in the presentation.\r\nSome ideas:\r\nMake a boxplot and try to add a combination of geom_point() and position = position_jitterdodge()\r\nA bit tricky: Summarize the data (calculate mean and standard deviation) grouped by species and sex. The plot points + errorbars for mean + sd. Have a look here to see how you can do this.\r\nSame as above but with bars instead of points to represent means\r\n\r\n2 Linear models with transformation\r\nNo tasks yet\r\n\r\n3 Poisson and binary glm\r\nNo tasks yet\r\n\r\n3 Proportion glm\r\nNo tasks yet\r\n\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:36:05+02:00"
    },
    {
      "path": "download_material_blank.html",
      "title": "You can download the full material after the workshop is finished",
      "description": "For now, please use the material avaialble from this website",
      "author": [],
      "contents": "\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:36:06+02:00"
    },
    {
      "path": "index.html",
      "title": "Introduction to R for Data Analysis",
      "description": "Welcome to the workshop. You can find all material and further information this website.\n",
      "author": [],
      "contents": "\r\nWorkshop organization and schedule\r\n🕘 9 a.m. - 4 p.m. (🥪 ~ 12 a.m. - 1 p.m.) 📍 We will meet every morning in the General meeting romm of you Webex team.\r\nI set up a shared document to collect additional resources, feedback, etc. You can find the document here, please feel free to edit it as you like.\r\nWorkshop Material\r\nYou can find all the material for the workshop on this website. On top, you can navigate to the presentation slides and the tasks for each day. At the end of the workshop day, I will also upload the solutions for each task.\r\nIf you want to download the slides in pdf Format:\r\n 01 - Introduction R and RStudio\r\n01 - Functions\r\n01 - Data & Tibbles\r\n01 - Tidyverse and Readr\r\n01 - Common errors\r\n02 - Ggplot2\r\n02 - Dplyr\r\n02 - Tidyr\r\n03 - Linear models\r\n03 - Generalized linear models\r\nAfter the workshop is finished, you can download a zipped version of the entire content from here.\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:36:09+02:00"
    },
    {
      "path": "online_resources.html",
      "title": "Additional online resources",
      "description": "Below you can find a collection of helpful links to further online resources regarding the workshop topics.\n",
      "author": [],
      "contents": "\r\n\r\nContents\r\nGeneral\r\nTidyverse\r\nreadr\r\nggplot\r\ndplyr\r\ntidyr\r\n\r\nLinear models\r\nTwitter accounts to follow\r\n\r\nGeneral\r\nList of RStudio cheatsheets: You can find a list of all the cheat sheets that RStudio provides there. Below, I listed the individual cheat sheets that are interesting for our course.\r\nRStudio cheatsheet: Explains the most important buttons, options, keyboard shortcuts, etc that you have in RStudio.\r\nThe modern dive book explains how to get started with R and data analysis with the tidyverse.\r\nThe R for Data Science book by Hadley Wickham is a very good book to start with.\r\nThe Big book of R is a book that list all books about R that are freely available only. The book is sorted by topics and can be used to find resources to learn a specific topic.\r\nA curated collection of R resources. Not just books but also websites, tutorials, help channels, …\r\nTidyverse\r\nThe tidyverse website has links to all tidyverse packages which all have very good examples and use cases. These websites are an excelent point to get started with a package.\r\nreadr\r\ndata import cheatsheet\r\nggplot\r\nggplot cheatsheet offers an overview of all possibilities of ggplot\r\nerror bars with ggplot A good summary of how to plot different types of means and errorbars (barplots, mean and errorbar, …).\r\nIn the R graph gallery you can browse through hundreds of different types of plots and find code to reproduce them.\r\nA great presentation by Cédric Scherer with examples of how to beautify your ggplots.\r\ndplyr\r\ndplyr cheatsheet\r\ntidyr\r\ndata import cheatsheet\r\nLinear models\r\nanova with R: explanation why an anova is also a linear model\r\nTwitter accounts to follow\r\nI personally learn a lot of tricks and find a lot of inspiration and resources by following some R people and accounts on twitter. Often people post helpful tutorials or blogpost that you would not find otherwise. If you are a twitter user, you can try that as well. Some suggestions are:\r\nCédric Scherer mainly data visualization and ggplot content\r\nAllison Horst\r\nRStudio official RStudio account\r\nHadley Wickham data visualisation, tidyverse\r\nJenny Bryan\r\nrOpenSci develop R tools for open science\r\nOne R Tip a Day one helpful R tip every day\r\n\r\n\r\n\r\n",
      "last_modified": "2021-07-31T17:36:10+02:00"
    }
  ],
  "collections": []
}
