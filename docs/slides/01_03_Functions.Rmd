---
subtitle: "Introduction to R - Day "
author: "Selina Baldauf"
institute: "Freie Universit√§t Berlin - Theoretical Ecology"
date: "2021-08-01"
output:
  xaringan::moon_reader:
    seal: false
    css: [default, css/new_slides.css]
    nature:
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
      countIncrementalSlides: false
      beforeInit: "macros.js"
params:
  title: "R Basics - Functions"
  day: "1"
  bg_image: ""
  bg_image_scale: "50%"
  bg_position: "70% 70%"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
library(fontawesome)
```

```{r child="title_slide.Rmd"}

```

---

# Functions

Functions make multiple operations available under one command.
--

.pull-left[
#### Functions in R:
- Have a **name**
- Have (0, 1, or any number of) **arguments as input**
- They calculate something using the arguments
- They have a **return value** (the output)
- Can have **side effects** (like plotting)
]

.pull-right[
![](img/day1/function_general.png)
]

--

General structure of a function call:

<b>.col1[function_name] ( .col2[argument] = .col3[value] )</b>

---

# The mean function

<b>.col1[function_name] ( .col2[argument] = .col3[value] )</b>

.pull-left[
<b>.col1[mean] ( .col2[x] = .col3[c(1,5,6)] )</b>

```{r}
mean(x = c(1,5,6)) # or short: mean(c(1,5,6))
```

]

.pull-right[
![](img/day1/function_mean.png)
]

--

- Arguments can also be variables
- The output of a function can be stored in a variable

```{r}
values <- c(1,5,6)
result <- mean(x = values)
result
```

---

# The mean function

But what does the mean function do? What are the arguments that I can use?

--

.pull-left[

`r fa("arrow-right")` &nbsp; Call the function help using `?`

```{r eval=FALSE}
?mean
```
]
.pull-right[
![:scale 700%](img/day1/mean_help_blank.png)
]

---
# Function arguments

- Arguments are the **input** to a function

- Functions can provide **default values** for some arguments

- Default values for arguments are indicated in the function help


.center[
![:scale 60%](img/day1/mean_help_default_arguments.png)]

---
# Function arguments

```{r}
# NA is a missing value
values <- c(1, 5, 6, NA)
mean(x = values)
```

What happened?&nbsp;&nbsp;
--
`r fa("arrow-right")`&nbsp;  `na.rm` argument is `FALSE` by default.<br>
--
Set it to `TRUE` if you want to calculate the mean despite missing values:

```{r}
mean(x = values, na.rm = TRUE)
```
--

**Arguments with default values are optional, arguments without default values are not!**

```{r error=TRUE}
mean()
```

---
# Function arguments

**Argument matching** can be achieved by **position** or by **name**

```{r, eval=FALSE}
mean(x, trim = 0, na.rm = FALSE, ...)
values <- c(1, 5, 6, NA)
```

--

These calls to mean all are the same:

```{r, eval=FALSE}
mean(values, , TRUE) # by position
```

--

```{r, eval=FALSE}
mean(x = values, na.rm = TRUE) # by name
```

--

```{r, eval=FALSE}
mean(na.rm = TRUE, x = values) # this also works but is not really nice
```

--

```{r, eval=FALSE}
mean(values, na.rm = TRUE) # a mix of both
```

---
# Function arguments

**Argument matching** can be achieved by **position** or by **name**

- Named arguments are (generally) preferred
  - Easier to remember
  - Easier to read
  - Some functions have a lot of arguments
  
```{r, eval=FALSE}
mean(x = values, na.rm = TRUE) # by name
```

--

- However, it is common to match the first argument by position (especially when the first argument is the data)

```{r, eval=FALSE}
mean(values, na.rm = TRUE) # a mix of both
```

---
# Where do functions come from?

.pull-left[
- Built into R (**base R** functions)
]
.pull-right[
```{r eval=FALSE}
mean() # calculate mean
seq()  # generate a sequence of values
lm()   # fit a linear model
[]     # This is also a (special) function
```
]

--

.pull-left[
 - From **additional packages**
 
  - Packages must be installed first
  - Call a function from a package using `packageName::functionName()`
]
.pull-right[
```{r eval=FALSE}
readr::read_csv() # read a csv file
beepr::beep() # make a beep sound
stringr::str_extract() # extract part of a string
```
]

--

.pull-left[
- **Custom** functions

  - Write your own functions and then use them in the code
]

.pull-right[

```{r eval = FALSE}
# custom function that prints input in a sentence
my_function <- function(x) {
  return(x + 5)
}
my_function(5)
```

]

---
# Summary

- Functions take **input** in the form of (named) arguments, calculate something and **return** a result

- Functions are called by their name, followed by parentheses:<br> `functionName(argument1 = value, argument2 = value, ...)`

- Functions from additional packages can be called like this:<br> `packageName::functionName()`

- Call `?functionName` to open the help of a function
