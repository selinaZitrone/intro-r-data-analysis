<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>01_06_common_errors.knit</title>
    <meta charset="utf-8" />
    <meta name="author" content="Selina Baldauf" />
    <meta name="date" content="2021-08-01" />
    <script src="01_06_common_errors_files/header-attrs-2.16/header-attrs.js"></script>
    <link href="01_06_common_errors_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/new_slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: inverse title-slide
background-image: url()
background-size: 50%
background-position: 70% 70%

# Common errors and how to fix them

## Introduction to R - Day 1

### Instructor: [Selina Baldauf](https://www.bcp.fu-berlin.de/biologie/arbeitsgruppen/botanik/ag_tietjen/People/wissenschaftliche_programmierer/baldauf/index.html) &lt;br&gt;

### Freie Universit√§t Berlin - Theoretical Ecology

.footnote-left[
  2021-08-01 (updated: 2022-08-30)
]

---
class: center, middle

When learning a programming language, you have to be prepared to spend a lot of 
your time with fixing bugs in the code. So don't worry: It's not you, it's just how programming works!
![:scale 85%](img/AllisonHorst/debugging.jpg)
.footnote-right[Artwork by [Allison Horst](https://twitter.com/allison_horst)]

---
# Debugging

Debugging can be annoying and we can't avoid it, but ...

.pull-left[

- ... it's an **effective learning experience** (I actually learned the most from debugging my code)

- ... it will get easier over time

- ... there are some **debugging techniques** to decrease the time in stages 2-7

- ... if nothing helps, there are great people all over the internet willing to help

]
.pull-right[![](img/AllisonHorst/debugging.jpg)]
.footnote-right[Artwork by [Allison Horst](https://twitter.com/allison_horst)]

---
class: inverse, center, middle

# .large[Most common <svg aria-hidden="true" role="img" viewBox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>  errors and problems for beginners and how to deal with them]

---
# Syntax errors

#### Example


```r
mean(c(1,2,3)na.rm=TRUE)
```

```
## Error: &lt;text&gt;:1:14: unexpected symbol
## 1: mean(c(1,2,3)na.rm
##                  ^
```
--
#### How to fix

- look for missing commas, misspelled arguments, ...
- read the error message
- the RStudio syntax checker warns you before you run code with syntax errors
  - look for &amp;nbsp;![](img/day1/red_x.png)&amp;nbsp; next to line numbers in your script

![](img/day1/errors_syntax.png)
---
# Error: could not find function

#### Examples


```
##     b  a
## 1   1  1
## 2   2  2
## 3   3  3
## 4   4  4
## 5   5  5
## 6   6  6
## 7   7  7
## 8   8  8
## 9   9  9
## 10 10 10
```

```
## Error in lenght(1:10): could not find function "lenght"
```
--
#### How to fix

`Could not find function` errors have two main reasons:

1. You forgot to load the package that the function belongs to

  - load the package using `library()` or call the function with `packageName::functionName()`

--

2. You have a typo in your function call (e.g. `lenght()` instead of `length()`)

---
# Error: object `x` not found

#### Example


```
## Error in eval(expr, envir, enclos): object 'hello' not found
```

```
## Error in eval(expr, envir, enclos): object 'variable_A' not found
```

--

#### How to fix

- you are trying to access an object that does not exist

- Mostly because:

  - typos in variable name (variable name is `variableA` but you try to access `variable_A`)
  
  - forgot to put quotes around string: `print(hello)`
  <svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M438.6 278.6l-160 160C272.4 444.9 264.2 448 256 448s-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L338.8 288H32C14.33 288 .0016 273.7 .0016 256S14.33 224 32 224h306.8l-105.4-105.4c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160C451.1 245.9 451.1 266.1 438.6 278.6z"/></svg> looks for a variable named hello but instead you wanted to print the string `print("hello")`

---
# Wrong data format

#### Example

- does not necessarily trigger an error message

- if there is an error message, it can also appear later in your code

--

#### How to fix it

- Look at `str()` of your data and check whether all columns are there and in correct format
  - e.g. is a column of type `character` but should be of type `integer`?
  
- Do that at multiple locations in your script to find the line where the error actually happens
  - everytime you change something in your data, check its structure

---
# R crashes

Sometimes R crashes completely and you see this:

![](img/day1/R_Crash.png)
--

#### How to fix it

- There is no fix but to start a new session

- Make sure to save your scripts regularly!

---
# Console prints `+`

R is not running code anymore and the console only prints `+` if you try to execute a command.

![](img/day1/Console_plus.png)
--

#### How to fix it

- First, go to the console and hit `Escape`. Then you should see the `&gt;` sign instead of `+` again.
- Likely you forgot to close a bracket somewhere. Go to your script and check where this happened
  - look for &amp;nbsp;![](img/day1/red_x.png)&amp;nbsp; next to line numers

---
# Warnings

R can give you warnings for many reasons, e.g.

- you have `NA` values in your data and try to plot them

- implicit type conversion returned `NA`

- the function you are using is deprecated

- the package you are using was built for another version of R

--

Warnings are no errors and can sometimes be ignored but:

- make sure to read and understand warnings

- only ignore them if you know that that's okay, otherwise fix the underlying issue

---
class: inverse, middle, center

# .large[How to troubleshoot R code]
## A step by step guide

---
# Troubleshoot R: Step by step

Often, you don't need to do all the steps but a systemmatic approach to bug fixing is very helpful.

--

**Step 1:** Carefully read the error message and try to fix it &lt;br&gt;

--

**Step 2:** Is it any of the errors you learned about just now? &lt;br&gt;

--

**Step 3:** If the error is about data or other variables: look at the structure using
`str()`

--

**Step 4:** If the error is about a function: Read the documentation using `?functionName`. 
  - Did you use the function correctly?
  - Did you forget an argument?&lt;br&gt;

--

**Step 5:** Look for answers online
  - often you can also jump directly to this step

--

**Step 6:** Ask others for help

---
# Step 5: Look for answers online

- Search with keywords **R + package name + Error message/Warning**

--

- If you don't know how do do something try searching **R + package name + What you want to do**, e.g.
  - "R ggplot change axis title"
  - "R sort vector"

--

- Usually you can pick any of the top search results, but I recommend results from [Stack Overflow](https://stackoverflow.com/)

--

- Always search in English to get more results&lt;br&gt;

--

.content-box-yellow[<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg> Change language of R messages to English with `Sys.setenv(LANGUAGE='en')`]

---
# Step 6: Ask others for help

There are plenty of places where you can ask for help online.
Some common and good options are:

- Ask a question on [Stack Overflow](https://stackoverflow.com/)

- Ask in the [R Discord server](https://discord.gg/88uG5UVyE2)
  - usually fast answers
  - but: you need a Discord account
  
- Ask on Twitter using the #rstats hashtag (maybe a bit less common)

--

**But**: You have to make sure that before, you tried all the other 5 steps.

--

To ask questions online, you have to learn **how to ask a good R question.**
This includes:

- clear question
- reproducible example

Look [here](https://github.com/selinaZitrone/R_AskQuestions) for more info on how to ask a good question about R


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
